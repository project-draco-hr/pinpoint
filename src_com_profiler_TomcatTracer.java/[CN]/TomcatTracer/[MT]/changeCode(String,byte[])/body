{
  boolean insertFlag=false;
  classPool.insertClassPath(new ByteArrayClassPath(javassistClassName,classfileBuffer));
  try {
    if (classPool == null) {
      System.out.println("NULL");
      classPool=ClassPool.getDefault();
    }
    CtClass cc=classPool.get(javassistClassName);
    CtMethod[] methodList=cc.getDeclaredMethods();
    for (    CtMethod method : methodList) {
      String methodName=method.getLongName();
      if (!method.isEmpty()) {
        System.out.println("***inserted instrument code at " + methodName);
        method.insertBefore("{ System.out.println(\"--- " + methodName + "  is called. \");}");
        insertFlag=true;
      }
    }
    if (insertFlag) {
      byte[] newClassfileBuffer=cc.toBytecode();
      System.out.println("@@@" + javassistClassName + "class's new Buffer generated !!!");
      return newClassfileBuffer;
    }
  }
 catch (  Exception e) {
    System.err.println("!!!!! " + e.getMessage());
  }
  return null;
}
