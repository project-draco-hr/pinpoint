{
  List<String> list=new ArrayList<String>();
  list.add(getJavaExecutable());
  list.add("-cp");
  list.add(getClassPath(defaultLibs,dependencyLibs));
  list.add(getAgent());
  list.add("-Dpinpoint.agentId=build.test.0");
  list.add("-Dpinpoint.applicationName=test");
  list.add("-Dfile.encoding=" + DEFAULT_ENCODING);
  list.add("-D" + PluginTestProperty.PINPOINT_TEST_ID + "="+ testId);
  String testDirectory=libraryPath + "/" + testId;
  if (libraryPath != null) {
    list.add("-D" + PluginTestProperty.PINPOINT_TEST_DIRECTORY + "="+ testDirectory);
  }
  for (  String arg : jvmArguments) {
    String replaced=arg.replace("${" + PluginTestProperty.PINPOINT_TEST_DIRECTORY + "}",testDirectory);
    list.add(replaced);
  }
  if (isDebugMode()) {
    list.addAll(getDebugOptions());
  }
  if (configFile != null) {
    list.add("-Dpinpoint.config=" + resolveConfigFileLocation());
  }
  list.add(ForkedPinpointPluginTest.class.getName());
  list.add(getTestClass().getName());
  if (testOnChildClassLoader) {
    list.add(getChildClassPath(dependencyLibs));
  }
  return list.toArray(new String[list.size()]);
}
