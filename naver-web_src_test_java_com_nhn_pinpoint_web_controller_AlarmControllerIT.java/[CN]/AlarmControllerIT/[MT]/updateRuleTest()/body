{
  final String applicationName="test_app_name";
  List<Rule> rules=new LinkedList<Rule>();
  for (int i=0; i < 3; i++) {
    rules.add(new Rule(applicationName,CheckerCategory.SLOW_COUNT.getName(),100,"test_group",true,true,""));
  }
  RuleGroup ruleGroup=new RuleGroup();
  ruleGroup.setRuleList(rules);
  controller.insertRule(ruleGroup);
  ModelAndView mv=controller.getRule(applicationName);
  rules=(List<Rule>)mv.getModel().get("ruleList");
  assertEquals(3,rules.size());
  List<Rule> updateRules=new LinkedList<Rule>();
  for (int i=0; i < 3; i++) {
    Rule rule=new Rule(applicationName,CheckerCategory.SLOW_COUNT.getName(),1000,"test_group",true,true,"");
    rule.setId(rules.get(i).getId());
    updateRules.add(rule);
  }
  updateRules.add(new Rule(applicationName,CheckerCategory.SLOW_COUNT.getName(),1000,"test_group",true,true,""));
  ruleGroup.setRuleList(updateRules);
  controller.updateRule(ruleGroup);
  mv=controller.getRule(applicationName);
  updateRules=(List<Rule>)mv.getModel().get("ruleList");
  assertEquals(4,updateRules.size());
  ruleGroup.setRuleList(updateRules);
  controller.deleteRule(ruleGroup);
  mv=controller.getRule(applicationName);
  rules=(List<Rule>)mv.getModel().get("ruleList");
  assertEquals(0,rules.size());
}
