{
  if (hostHistogram == null) {
    return;
  }
  for (  Entry<String,Host> entry : hostHistogram.entrySet()) {
    String instanceName=entry.getKey();
    int pos=instanceName.indexOf(':');
    String hostName=(pos > 0) ? instanceName.substring(0,pos) : instanceName;
    ServiceType serviceType=entry.getValue().getServiceType();
    ServerInstance serverInstance=new ServerInstance(instanceName,serviceType,null);
    MergeableMap<String,ServerInstance> serverInstanceMap=serverInstanceList.get(hostName);
    if (serverInstanceMap == null) {
      MergeableMap<String,ServerInstance> value=new MergeableTreeMap<String,ServerInstance>();
      value.put(serverInstance.getId(),serverInstance);
      serverInstanceList.put(hostName,value);
    }
 else {
      MergeableMap<String,ServerInstance> map=serverInstanceList.get(hostName);
      map.putOrMerge(serverInstance.getId(),serverInstance);
    }
  }
}
