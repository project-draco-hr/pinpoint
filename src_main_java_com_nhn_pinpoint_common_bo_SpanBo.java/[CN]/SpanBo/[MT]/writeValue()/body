{
  byte[] agentIDBytes=BytesUtils.getBytes(agentId);
  byte[] rpcBytes=BytesUtils.getBytes(rpc);
  byte[] applicationIdBytes=BytesUtils.getBytes(applicationId);
  byte[] endPointBytes=BytesUtils.getBytes(endPoint);
  byte[] remoteAddrBytes=BytesUtils.getBytes(remoteAddr);
  final Buffer buffer=new AutomaticBuffer(256);
  buffer.put(version);
  buffer.put1PrefixedBytes(agentIDBytes);
  buffer.putVar(agentStartTime);
  buffer.put(parentSpanId);
  buffer.putVar(startTime);
  buffer.putVar(elapsed);
  buffer.put1PrefixedBytes(rpcBytes);
  buffer.put1PrefixedBytes(applicationIdBytes);
  buffer.put(serviceType.getCode());
  buffer.put1PrefixedBytes(endPointBytes);
  buffer.put1PrefixedBytes(remoteAddrBytes);
  buffer.putSVar(apiId);
  buffer.putSVar(errCode);
  if (hasException) {
    buffer.put(true);
    buffer.putSVar(exceptionId);
    buffer.putPrefixedString(exceptionMessage);
  }
 else {
    buffer.put(false);
  }
  if (flag != 0) {
    buffer.put(flag);
  }
  return buffer.getBuffer();
}
