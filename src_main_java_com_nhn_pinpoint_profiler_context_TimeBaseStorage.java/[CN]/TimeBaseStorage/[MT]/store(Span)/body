{
  if (discard) {
    limit=checkLimit(span);
    if (!limit) {
synchronized (this) {
        this.storage=null;
      }
      logger.debug("discard spanEvent");
      dataSender.send((Thriftable)span);
    }
 else {
      flushAll(span);
    }
  }
 else {
    flushAll(span);
  }
}
