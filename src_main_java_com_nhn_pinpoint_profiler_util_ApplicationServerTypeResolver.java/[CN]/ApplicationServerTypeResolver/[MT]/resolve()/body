{
  final String catalinaHome=System.getProperty("catalina.home");
  if (logger.isInfoEnabled()) {
    logger.info("CATALINA_HOME={}",catalinaHome);
  }
  if (defaultType != null) {
    logger.info("applicationServerDefaultType:{}",defaultType);
    if (defaultType == ServiceType.TOMCAT) {
      return resolveTomcat(catalinaHome);
    }
 else     if (defaultType == ServiceType.BLOC) {
      return resolveBloc(catalinaHome);
    }
 else     if (defaultType == ServiceType.STAND_ALONE) {
      resolveStandAlone();
      logger.info("applicationServerDefaultType:{}",defaultType);
      return true;
    }
 else {
      logger.warn("Invalid Default ApplicationServiceType:{} ",defaultType);
      return false;
    }
  }
  final File blocCatalinaJar=new File(catalinaHome + "/server/lib/catalina.jar");
  final File blocServletApiJar=new File(catalinaHome + "/common/lib/servlet-api.jar");
  if (isFileExist(blocCatalinaJar) && isFileExist(blocServletApiJar)) {
    return resolveBloc(catalinaHome);
  }
 else   if (isFileExist(new File(catalinaHome + "/lib/catalina.jar"))) {
    return resolveTomcat(catalinaHome);
  }
 else {
    logger.info("applicationServerDefaultType:{}",defaultType);
    return resolveStandAlone();
  }
}
