{
  if (span.getServiceType().isTerminal()) {
    this.agentIds.add(span.getAgentId());
  }
 else {
    this.agentIds.add(span.getEndPoint());
  }
  if (span.getServiceType().isRpcClient()) {
    this.id=span.getEndPoint();
    this.applicationName=span.getEndPoint();
    this.serviceType=ServiceType.UNKNOWN_CLOUD;
  }
 else {
    this.id=nodeSelector.getServerId(span);
    this.applicationName=span.getDestinationId();
    this.serviceType=span.getServiceType();
  }
  this.endPoint=span.getEndPoint();
  this.recursiveCallCount=0;
}
