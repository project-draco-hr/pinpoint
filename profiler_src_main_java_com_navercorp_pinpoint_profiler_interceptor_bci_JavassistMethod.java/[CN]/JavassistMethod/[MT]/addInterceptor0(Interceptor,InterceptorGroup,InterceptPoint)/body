{
  if (!(interceptor instanceof StaticAroundInterceptor) && !(interceptor instanceof SimpleAroundInterceptor)) {
    throw new InstrumentException("unsupported interceptor type:" + interceptor);
  }
  if (interceptor instanceof TraceContextSupport) {
    final TraceContext traceContext=pluginContext.getTraceContext();
    ((TraceContextSupport)interceptor).setTraceContext(traceContext);
  }
  if (interceptor instanceof ByteCodeMethodDescriptorSupport) {
    ((ByteCodeMethodDescriptorSupport)interceptor).setMethodDescriptor(descriptor);
  }
  DefaultInterceptorInstance holder=new DefaultInterceptorInstance(interceptor,group,group == null ? null : ExecutionPolicy.BOUNDARY);
  int interceptorId=interceptorRegistryBinder.getInterceptorRegistryAdaptor().addInterceptor(holder);
  try {
    addInterceptor0(holder,interceptorId,type);
  }
 catch (  Exception e) {
    throw new InstrumentException(e);
  }
  return interceptorId;
}
