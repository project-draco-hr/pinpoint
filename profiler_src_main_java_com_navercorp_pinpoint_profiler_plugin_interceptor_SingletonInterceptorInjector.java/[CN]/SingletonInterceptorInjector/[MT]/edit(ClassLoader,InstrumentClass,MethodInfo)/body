{
  if (id == -1) {
    Interceptor interceptor=factory.getInterceptor(targetClassLoader,targetClass,targetMethod);
    if (targetMethod.isConstructor()) {
      id=targetClass.addConstructorInterceptor(targetMethod.getParameterTypes(),interceptor);
    }
 else {
      id=targetClass.addInterceptor(targetMethod.getName(),targetMethod.getParameterTypes(),interceptor);
    }
  }
 else {
    if (targetMethod.isConstructor()) {
      throw new IllegalArgumentException("Reusing constructor interceptor is not supported");
    }
 else {
      targetClass.reuseInterceptor(targetMethod.getName(),targetMethod.getParameterTypes(),id);
    }
  }
}
