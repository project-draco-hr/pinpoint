{
  if (traceContext == null) {
    throw new NullPointerException("traceContext must not be null");
  }
  this.traceContext=traceContext;
  this.traceId=new DefaultTraceId(traceContext.getAgentId(),traceContext.getAgentStartTime(),transactionId);
  this.sampling=sampling;
  this.traceId.incrementTraceCount();
  this.spanRecorder=new DefaultSpanRecorder(traceContext,traceId,sampling);
  this.spanRecorder.recordTraceId(traceId);
  this.spanEventRecorder=new WrappedSpanEventRecorder(traceContext);
}
