{
  if (!callStack.empty()) {
    PinpointException exception=new PinpointException("Corrupted CallStack found");
    logger.warn("Corrupted CallStack found. stack is not empty.",exception);
  }
  logSpan(traceHeader.getSpan());
  if (this.storage != null) {
    this.traceId.decrementTraceCount();
    this.storage.close();
    this.storage=null;
  }
}
