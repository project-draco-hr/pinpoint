{
  final SpanEvent spanEvent=new SpanEvent(spanRecorder.getSpan());
  spanEvent.markStartTime();
  spanEvent.setStackId(stackId);
  spanEvent.setSequence(nextSequence());
  final int currentStackIndex=callStack.push(spanEvent);
  if (latestStackIndex != currentStackIndex) {
    latestStackIndex=currentStackIndex;
    spanEvent.setDepth(latestStackIndex);
  }
  spanEventRecorder.setWrapped(spanEvent);
  return spanEventRecorder;
}
