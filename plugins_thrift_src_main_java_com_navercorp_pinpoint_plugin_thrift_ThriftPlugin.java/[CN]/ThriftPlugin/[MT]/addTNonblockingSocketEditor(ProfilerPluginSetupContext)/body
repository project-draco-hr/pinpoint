{
  final ClassFileTransformerBuilder classTransformerBuilder=context.getClassFileTransformerBuilder("org.apache.thrift.transport.TNonblockingSocket");
  classTransformerBuilder.injectMetadata(METADATA_SOCKET);
  classTransformerBuilder.injectMetadata(METADATA_NONBLOCKING_SOCKET_ADDRESS);
  final ConstructorTransformerBuilder constructorTransformerBuilder=classTransformerBuilder.editConstructor("java.nio.channels.SocketChannel","int","java.net.SocketAddress");
  constructorTransformerBuilder.property(MethodTransformerProperty.IGNORE_IF_NOT_EXIST);
  constructorTransformerBuilder.injectInterceptor("com.navercorp.pinpoint.plugin.thrift.interceptor.transport.TNonblockingSocketConstructInterceptor");
  context.addClassFileTransformer(classTransformerBuilder.build());
}
