{
  final ClassFileTransformerBuilder classTransformerBuilder=context.getClassFileTransformerBuilder("org.apache.thrift.TBaseAsyncProcessor");
  classTransformerBuilder.injectMetadata(METADATA_SOCKET);
  classTransformerBuilder.injectMetadata(METADATA_SERVER_MARKER);
  classTransformerBuilder.injectMetadata(METADATA_ASYNC_MARKER);
  final MethodTransformerBuilder processMethodTransformerBuilder=classTransformerBuilder.editMethod("process","org.apache.thrift.server.AbstractNonblockingServer$AsyncFrameBuffer");
  processMethodTransformerBuilder.property(MethodTransformerProperty.IGNORE_IF_NOT_EXIST);
  processMethodTransformerBuilder.injectInterceptor("com.navercorp.pinpoint.plugin.thrift.interceptor.server.async.TBaseAsyncProcessorProcessInterceptor");
  context.addClassFileTransformer(classTransformerBuilder.build());
}
