{
  final Class<?> bootStrapClazz=getBootStrapClass();
  final Object agent=executeTemplate.execute(new Callable<Object>(){
    @Override public Object call() throws Exception {
      try {
        Constructor<?> constructor=bootStrapClazz.getConstructor(String.class,String.class,Instrumentation.class,ProfilerConfig.class);
        return constructor.newInstance(agentPath,agentArgs,instrumentation,profilerConfig);
      }
 catch (      InstantiationException e) {
        throw new BootStrapException("boot create fail. Caused:" + e.getMessage(),e);
      }
catch (      IllegalAccessException e) {
        throw new BootStrapException("boot method invoke fail. Caused:" + e.getMessage(),e);
      }
    }
  }
);
  if (agent instanceof Agent) {
    this.agentBootStrap=(Agent)agent;
  }
 else {
    String agentClassName;
    if (agent == null) {
      agentClassName="Agent is null";
    }
 else {
      agentClassName=agent.getClass().getName();
    }
    throw new BootStrapException("Invalid AgentType. boot fail. AgentClass:" + agentClassName);
  }
}
