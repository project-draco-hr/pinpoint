{
  spanMap=new HashMap<Integer,SpanBo>(spans.size());
  long rootSpanStartTime=Long.MAX_VALUE;
  for (  SpanBo span : spans) {
    if (spanMap.containsKey(span.getSpanId())) {
      throw new IllegalStateException("duplicated spanId. id:" + span.getSpanId());
    }
    if (span.getParentSpanId() == ROOT) {
      rootSpanId=ROOT;
      spanMap.put(ROOT,span);
      continue;
    }
 else     if ((rootSpanId == null || !rootSpanId.equals(ROOT)) && span.getStartTime() < rootSpanStartTime) {
      rootSpanId=(span.getParentSpanId() == ROOT) ? ROOT : span.getSpanId();
      rootSpanStartTime=span.getStartTime();
    }
    spanMap.put(span.getSpanId(),span);
  }
}
