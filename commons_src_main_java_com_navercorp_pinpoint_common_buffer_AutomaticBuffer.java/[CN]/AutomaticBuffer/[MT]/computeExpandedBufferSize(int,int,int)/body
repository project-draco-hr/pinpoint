{
  int expandedBufferSize=0;
  while (remain < size) {
    length<<=1;
    expandedBufferSize=length;
    remain=expandedBufferSize - offset;
  }
  return expandedBufferSize;
}
