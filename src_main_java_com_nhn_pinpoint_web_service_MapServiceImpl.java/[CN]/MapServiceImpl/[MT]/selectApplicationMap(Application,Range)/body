{
  if (sourceApplication == null) {
    throw new NullPointerException("sourceApplication must not be null");
  }
  if (range == null) {
    throw new NullPointerException("range must not be null");
  }
  logger.debug("SelectApplicationMap");
  StopWatch watch=new StopWatch("applicationMapWatch");
  watch.start();
  LinkVisitChecker linkVisitChecker=new LinkVisitChecker();
  LinkStatisticsData caller=selectCaller(sourceApplication,range,linkVisitChecker);
  logger.debug("Result of finding caller {}",caller);
  LinkStatisticsData callee=selectCallee(sourceApplication,range,linkVisitChecker);
  logger.debug("Result of finding callee {}",callee);
  LinkStatisticsData data=new LinkStatisticsData();
  data.addLinkStatisticsData(caller);
  data.addLinkStatisticsData(callee);
  ApplicationMapBuilder builder=new ApplicationMapBuilder(range);
  ApplicationMap map=builder.build(data);
  map.appendResponseTime(range,this.mapResponseDao);
  watch.stop();
  logger.info("Fetch applicationmap elapsed. {}ms",watch.getLastTaskTimeMillis());
  return map;
}
