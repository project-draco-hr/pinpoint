{
  if (sourceApplication == null) {
    throw new NullPointerException("sourceApplication must not be null");
  }
  if (destinationApplication == null) {
    throw new NullPointerException("destinationApplication must not be null");
  }
  List<LinkDataMap> list=selectLink(sourceApplication,destinationApplication,range);
  logger.debug("Fetched statistics data size={}",list.size());
  MapResponseHistogramSummary responseHistogramSummary=new MapResponseHistogramSummary(range);
  for (  LinkDataMap entry : list) {
    for (    LinkData linkData : entry.getLinkDataList()) {
      CallHistogramList sourceList=linkData.getSourceList();
      Collection<CallHistogram> callHistogramList=sourceList.getCallHistogramList();
      for (      CallHistogram histogram : callHistogramList) {
        for (        TimeHistogram timeHistogram : histogram.getTimeHistogram()) {
          Application toApplication=linkData.getToApplication();
          if (toApplication.getServiceType().isRpcClient()) {
            toApplication=new Application(toApplication.getName(),ServiceType.UNKNOWN);
          }
          responseHistogramSummary.addLinkHistogram(toApplication,histogram.getId(),timeHistogram);
        }
      }
    }
  }
  responseHistogramSummary.build();
  List<ResponseTime> responseTimeList=responseHistogramSummary.getResponseTimeList(destinationApplication);
  final ResponseHistogramSummary histogramSummary=new ResponseHistogramSummary(destinationApplication,range,responseTimeList);
  return histogramSummary;
}
