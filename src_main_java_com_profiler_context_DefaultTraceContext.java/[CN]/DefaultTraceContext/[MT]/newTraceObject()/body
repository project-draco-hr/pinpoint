{
  checkBeforeTraceObject();
  DefaultTrace trace=new DefaultTrace();
  Storage storage=storageFactory.createStorage();
  trace.setStorage(storage);
  trace.setTraceContext(this);
  trace.setSampling(this.sampler.isSampling());
  threadLocal.set(trace);
  return trace;
}
