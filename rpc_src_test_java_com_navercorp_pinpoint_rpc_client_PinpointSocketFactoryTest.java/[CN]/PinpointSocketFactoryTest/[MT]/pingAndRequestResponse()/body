{
  PinpointServerSocket serverSocket=PinpointRPCTestUtils.createServerSocket(bindPort,new RequestResponseServerMessageListener());
  try {
    PinpointSocket socket=socketFactory.connect("127.0.0.1",bindPort);
    byte[] randomByte=TestByteUtils.createRandomByte(10);
    byte[] response=PinpointRPCTestUtils.request(socket,randomByte);
    Assert.assertArrayEquals(randomByte,response);
    PinpointRPCTestUtils.close(socket);
  }
  finally {
    PinpointRPCTestUtils.close(serverSocket);
  }
}
