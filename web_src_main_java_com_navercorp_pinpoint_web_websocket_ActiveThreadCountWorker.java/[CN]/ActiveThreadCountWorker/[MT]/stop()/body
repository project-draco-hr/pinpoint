{
synchronized (lock) {
    if (!started && stopped) {
      return;
    }
    stopped=true;
    logger.info("ActiveThreadCountWorker stop. agentId:{}, streamChannel:{}",agentInfo.getAgentId(),streamChannel);
    try {
      streamConnectionManager.removeReconnectJob(agentInfo);
      if (streamChannel != null) {
        streamChannel.close();
      }
      defaultFailedResponse.setFail(StreamCode.STATE_CLOSED.name());
    }
 catch (    Exception e) {
    }
  }
}
