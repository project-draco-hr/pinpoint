{
  if (!child) {
    final TAgentKey tAgentKey=DefaultAgent.getInstance().getTAgentKey();
    this.setAgentKey(tAgentKey);
    this.setParentServiceType(span.getServiceType());
    this.setParentEndPoint(span.getEndPoint());
    this.setTraceAgentId(span.getTraceAgentId());
    this.setTraceAgentStartTime(span.getTraceAgentStartTime());
    this.setTraceTransactionSequence(span.getTraceTransactionSequence());
    this.setSpanId(span.getSpanId());
  }
  if (annotationList != null) {
    List<TAnnotation> annotationList=new ArrayList<TAnnotation>(this.annotationList.size());
    for (    Annotation annotation : this.annotationList) {
      annotationList.add(annotation.toThrift());
    }
    this.setAnnotations(annotationList);
    this.annotationList=null;
  }
  return this;
}
