{
  final Class<?> interceptorClass=interceptor.getInterceptorClazz();
  final CaptureType captureType=interceptor.getCaptureType();
  if (!isBeforeInterceptor(captureType)) {
    return -1;
  }
  final Method interceptorMethod=interceptor.getBeforeMethod();
  if (interceptorMethod == null) {
    if (isDebug) {
      logger.debug("Skip adding before interceptor because the interceptor doesn't have before method: {}",interceptorClass.getName());
    }
    return -1;
  }
  InvokeBeforeCodeGenerator generator=new InvokeBeforeCodeGenerator(interceptorId,interceptorClass,interceptorMethod,declaringClass,this,pluginContext.getTraceContext());
  String beforeCode=generator.generate();
  if (isDebug) {
    logger.debug("addBeforeInterceptor before behavior:{} code:{}",behavior.getLongName(),beforeCode);
  }
  return insertBefore(pos,beforeCode);
}
