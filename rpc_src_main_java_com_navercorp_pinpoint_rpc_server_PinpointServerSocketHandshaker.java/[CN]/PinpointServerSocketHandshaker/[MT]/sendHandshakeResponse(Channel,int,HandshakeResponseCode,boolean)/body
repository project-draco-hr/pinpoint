{
  if (!isFirst) {
    if (HandshakeResponseCode.DUPLEX_COMMUNICATION == responseCode) {
      sendHandshakeResponse0(channel,requestId,HandshakeResponseCode.ALREADY_DUPLEX_COMMUNICATION);
    }
 else     if (HandshakeResponseCode.SIMPLEX_COMMUNICATION == responseCode) {
      sendHandshakeResponse0(channel,requestId,HandshakeResponseCode.ALREADY_SIMPLEX_COMMUNICATION);
    }
 else {
      sendHandshakeResponse0(channel,requestId,responseCode);
    }
  }
 else {
    sendHandshakeResponse0(channel,requestId,responseCode);
  }
}
