{
  long spanId=event.getSpanId();
  Long spanStartTime=spanStartTimeTable.get(spanId);
  if (spanStartTime != null) {
    insertItem(new Item(event,spanStartTime + event.getStartElapsed(),spanId,event.getSequence()));
    return;
  }
  List<TSpanEvent> events=waitingEventTable.get(spanId);
  if (events == null) {
    events=new ArrayList<TSpanEvent>();
    waitingEventTable.put(spanId,events);
  }
  int pos=Collections.binarySearch(events,event,SPAN_EVENT_COMPARATOR);
  if (pos >= 0) {
    throw new IllegalArgumentException("Duplicated?? list: " + events + ", item: "+ event);
  }
  int index=-(pos + 1);
  events.add(index,event);
}
