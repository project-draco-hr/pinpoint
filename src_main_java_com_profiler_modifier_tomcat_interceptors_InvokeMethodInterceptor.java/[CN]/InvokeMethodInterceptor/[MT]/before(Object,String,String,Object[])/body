{
  try {
    HttpServletRequest request=(HttpServletRequest)args[0];
    String requestURL=request.getRequestURI();
    String clientIP=request.getRemoteAddr();
    String parameters=getParameter(request);
    UUID traceID=getTraceId(request);
    if (traceID != null) {
      long parentSpanID=NumberUtils.parseLong(request.getHeader(Header.HTTP_PARENT_SPAN_ID.toString()),SpanID.NULL);
      long spanID=NumberUtils.parseLong(request.getHeader(Header.HTTP_SPAN_ID.toString()),SpanID.NULL);
      boolean sampled=Boolean.parseBoolean(request.getHeader(Header.HTTP_SAMPLED.toString()));
      int flags=NumberUtils.parseInteger(request.getHeader(Header.HTTP_FLAGS.toString()),0);
      TraceID id=new TraceID(traceID,parentSpanID,spanID,sampled,flags);
      System.out.println("\n\n\ngot a traceid. traceid=" + id + "\n\n\n");
      Trace.setTraceId(id);
    }
 else {
      Trace.setTraceId(TraceID.newTraceId());
    }
    Trace.recordRpcName("tomcat",requestURL);
    Trace.recordServerAddr(request.getLocalAddr(),request.getLocalPort());
    Trace.record("Parameter=" + parameters);
    Trace.record(new Annotation.ServerRecv());
    RequestTracer.startTransaction(requestURL,clientIP,System.currentTimeMillis(),parameters);
    start.set(System.currentTimeMillis());
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
