{
  try {
    HttpServletRequest request=(HttpServletRequest)args[0];
    String requestURL=request.getRequestURI();
    String clientIP=request.getRemoteAddr();
    String traceID=request.getHeader(Header.HTTP_TRACE_ID.toString());
    String parentSpanID=request.getHeader(Header.HTTP_PARENT_SPAN_ID.toString());
    String spanID=request.getHeader(Header.HTTP_SPAN_ID.toString());
    Boolean sampled=null;
    if (request.getHeader(Header.HTTP_SAMPLED.toString()) != null) {
      sampled=Boolean.valueOf(request.getHeader(Header.HTTP_SAMPLED.toString()));
    }
    Integer flags=null;
    if (request.getHeader(Header.HTTP_FLAGS.toString()) != null) {
      flags=Integer.valueOf(request.getHeader(Header.HTTP_FLAGS.toString()));
    }
    String parameters=getParameter(request);
    if (traceID != null) {
      TraceID id=new TraceID(traceID,parentSpanID,spanID,sampled,flags);
      System.out.println("\n\n\ngot a traceid. traceid=" + id + "\n\n\n");
      Trace.setTraceId(id);
    }
 else {
      Trace.setTraceId(TraceID.newTraceId());
    }
    Trace.recordRpcName("tomcat",requestURL);
    Trace.recordServerAddr(request.getLocalAddr(),request.getLocalPort());
    Trace.record("Parameter=" + parameters);
    Trace.record(new Annotation.ServerRecv());
    RequestTracer.startTransaction(requestURL,clientIP,System.currentTimeMillis(),parameters);
    start.set(System.currentTimeMillis());
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
