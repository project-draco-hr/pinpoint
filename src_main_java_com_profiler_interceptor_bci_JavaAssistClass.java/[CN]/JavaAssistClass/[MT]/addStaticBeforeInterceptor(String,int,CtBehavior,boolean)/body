{
  String target=getTarget(behavior);
  String parameterDescription=JavaAssistUtils.getParameterDescription(behavior.getParameterTypes());
  String parameter=getParameter(behavior);
  CodeBuilder code=new CodeBuilder();
  if (useContextClassLoader) {
    code.begin();
    beginAddFindInterceptorCode(id,code);
    code.format("  java.lang.Class[] beforeMethodParams = new Class[]{java.lang.Object.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.Object[].class};");
    code.format("  java.lang.reflect.Method beforeMethod = interceptor.getClass().getMethod(\"%1$s\", beforeMethodParams);","before");
    code.format("  java.lang.Object[] beforeParams = new java.lang.Object[] { %1$s, \"%2$s\", \"%3$s\", \"%4$s\", %5$s };",target,ctClass.getName(),methodName,parameterDescription,parameter);
    code.format("  beforeMethod.invoke(interceptor, beforeParams);");
    code.format("}");
    code.end();
  }
 else {
    code.begin();
    code.format("  %1$s interceptor = (%1$s) com.profiler.interceptor.InterceptorRegistry.getInterceptor(%2$d);",StaticBeforeInterceptor.class.getName(),id);
    code.format("  interceptor.before(%1$s, \"%2$s\", \"%3$s\", \"%4$s\", %5$s);",target,ctClass.getName(),methodName,parameterDescription,parameter);
    code.end();
  }
  String buildBefore=code.toString();
  if (logger.isInfoEnabled()) {
    logger.info("addStaticBeforeInterceptor catch behavior:" + behavior.getLongName() + " code:"+ buildBefore);
  }
  if (behavior instanceof CtConstructor) {
    ((CtConstructor)behavior).insertBeforeBody(buildBefore);
  }
 else {
    behavior.insertBefore(buildBefore);
  }
}
