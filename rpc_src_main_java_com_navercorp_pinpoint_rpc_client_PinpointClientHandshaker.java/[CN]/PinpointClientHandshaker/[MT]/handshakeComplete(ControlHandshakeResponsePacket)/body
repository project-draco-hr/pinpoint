{
  logger.info("{} handshakeComplete method started. params:{}",simpleClassNameAndHashCodeString(),message);
synchronized (lock) {
    if (!this.state.compareAndSet(STATE_STARTED,STATE_FINISHED)) {
      logger.info("{} handshakeComplete method failed. beforeState:{}",simpleClassNameAndHashCodeString(),state.get());
      this.state.set(STATE_FINISHED);
      return false;
    }
    Map handshakeResponse=decode(message);
    HandshakeResponseCode code=getResponseCode(handshakeResponse);
    handshakeResult.compareAndSet(null,code);
    ClusterOption clusterOption=getClusterOption(handshakeResponse);
    this.clusterOption.compareAndSet(null,clusterOption);
    logger.info("{} handshakeComplete method completed. handshakeResult:{} / {}",simpleClassNameAndHashCodeString(),code,handshakeResult.get());
    return true;
  }
}
