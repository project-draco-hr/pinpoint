{
  final ChunkHeaderTBaseDeserializer deserializer=new ChunkHeaderTBaseDeserializer(DEFAULT_PROTOCOL_FACTORY,DEFAULT_TBASE_LOCATOR);
  ChunkHeaderBufferedTBaseSerializer serializer=new ChunkHeaderBufferedTBaseSerializer(1024);
  serializer.setFlushHandler(new ChunkHeaderBufferedTBaseSerializerFlushHandler(){
    @Override public void handle(    byte[] buffer,    int offset,    int length){
      try {
        deserializer.deserialize(Arrays.copyOfRange(buffer,offset,length));
      }
 catch (      TException e) {
        fail("Failed to deserialize. " + e.getMessage());
      }
    }
  }
);
  TSpanChunk chunk=new TSpanMockBuilder().buildChunk(3,10);
  serializer.add(chunk);
  serializer.flush();
}
