{
  System.setProperty("catalina.home","test");
  PLoggerFactory.initialize(new Slf4jLoggerBinder());
  ProfilerConfig profilerConfig=new ProfilerConfig();
  profilerConfig.setApplicationServerType(ServiceType.TOMCAT);
  DefaultAgent agent=new DefaultAgent("",new DummyInstrumentation(),profilerConfig);
  loader=new TestClassLoader(agent);
  MySQLNonRegisteringDriverModifier driverModifier=new MySQLNonRegisteringDriverModifier(loader.getInstrumentor(),agent);
  loader.addModifier(driverModifier);
  MySQLConnectionImplModifier connectionModifier=new MySQLConnectionImplModifier(loader.getInstrumentor(),agent);
  loader.addModifier(connectionModifier);
  MySQLStatementModifier statementModifier=new MySQLStatementModifier(loader.getInstrumentor(),agent);
  loader.addModifier(statementModifier);
  MySQLPreparedStatementModifier preparedStatementModifier=new MySQLPreparedStatementModifier(loader.getInstrumentor(),agent);
  loader.addModifier(preparedStatementModifier);
  MySQLPreparedStatementJDBC4Modifier preparedStatementJDBC4Modifier=new MySQLPreparedStatementJDBC4Modifier(loader.getInstrumentor(),agent);
  loader.addModifier(preparedStatementJDBC4Modifier);
  loader.initialize();
}
