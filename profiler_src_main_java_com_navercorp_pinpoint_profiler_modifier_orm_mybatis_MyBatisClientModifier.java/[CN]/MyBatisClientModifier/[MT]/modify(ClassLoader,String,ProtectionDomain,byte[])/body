{
  if (logger.isInfoEnabled()) {
    logger.info("Modifying. {}",javassistClassName);
  }
  try {
    InstrumentClass myBatisClientImpl=byteCodeInstrumentor.getClass(classLoader,javassistClassName,classFileBuffer);
    List<MethodInfo> declaredMethods=myBatisClientImpl.getDeclaredMethods(getSqlSessionMethodFilter());
    for (    MethodInfo method : declaredMethods) {
      Interceptor sqlSessionInterceptor=new MyBatisSqlMapOperationInterceptor(serviceType);
      myBatisClientImpl.addScopeInterceptor(method.getName(),method.getParameterTypes(),sqlSessionInterceptor,scope);
    }
    return myBatisClientImpl.toBytecode();
  }
 catch (  Throwable e) {
    logger.warn("{} modifier error. Cause:{}",javassistClassName,e.getMessage(),e);
    return null;
  }
}
