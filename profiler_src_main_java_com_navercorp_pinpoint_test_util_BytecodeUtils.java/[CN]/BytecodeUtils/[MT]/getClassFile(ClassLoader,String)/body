{
  if (classLoader == null) {
    classLoader=ClassLoader.getSystemClassLoader();
  }
  if (className == null) {
    throw new NullPointerException("className must not be null");
  }
  final InputStream is=classLoader.getResourceAsStream(className.replace('.','/') + ".class");
  if (is == null) {
    throw new RuntimeException("No such class file: " + className);
  }
  ReadableByteChannel channel=Channels.newChannel(is);
  ByteBuffer buffer;
  try {
    buffer=ByteBuffer.allocate(is.available());
    while (channel.read(buffer) >= 0) {
      if (buffer.remaining() == 0) {
        buffer.flip();
        ByteBuffer newBuffer=ByteBuffer.allocate(buffer.capacity() * 2);
        newBuffer.put(buffer);
        buffer=newBuffer;
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    close(is);
  }
  return buffer.array();
}
