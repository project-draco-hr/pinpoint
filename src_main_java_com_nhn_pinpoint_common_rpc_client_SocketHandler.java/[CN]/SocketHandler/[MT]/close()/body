{
  if (!state.compareAndSet(STATE_RUN,STATE_CLOSED)) {
    return;
  }
  final Channel channel=this.channel;
  ClosePacket closePacket=new ClosePacket();
  channel.write(closePacket);
  this.requestManager.close();
  this.streamChannelManager.close();
  channel.close();
}
