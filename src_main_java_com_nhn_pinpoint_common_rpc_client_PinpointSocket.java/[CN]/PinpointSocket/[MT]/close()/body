{
  if (!state.compareAndSet(STATE_RUN,STATE_CLOSED)) {
    return;
  }
  Channel channel=this.channel;
  ChannelContext ctx=getChannelContext(channel);
  ctx.getRequestManager().close();
  ctx.getStreamChannelManager().close();
  channel.close();
}
