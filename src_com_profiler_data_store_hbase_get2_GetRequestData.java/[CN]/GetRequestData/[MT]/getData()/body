{
  StringBuilder data=new StringBuilder();
  THBaseService.Client client=getClient();
  if (client != null) {
    try {
      totalDataCount=0;
      GetServerData getServer=new GetServerData();
      List<TGet> agentList=getServer.getServerList(client);
      long fromTime=timestamp - period;
      List<TGet> rows=new ArrayList<TGet>();
      for (int loop=1; loop <= minutes; loop++) {
        String tempTimeString=DATE_FORMAT_YMD_HM.format(new Date(fromTime + loop * 60000));
        TGet tempGet=new TGet();
        tempGet.setRow(Converter.toByteBuffer(tempTimeString));
        tempGet.setColumns(columnList);
        rows.add(tempGet);
      }
      scatterChartData.append("[");
      for (      TGet agent : agentList) {
        String agentHashCode=new String(agent.getRow());
        agentNameList.add(agentHashCode);
        String tableName=HBASE_REQUEST_TABLE + "_" + agentHashCode;
        ByteBuffer tableNameBuffer=ByteBuffer.wrap(tableName.getBytes());
        long startTime=System.nanoTime();
        List<TResult> dataList=client.getMultiple(tableNameBuffer,rows);
        long endTime=System.nanoTime();
        int dataListSize=dataList.size();
        double getTime=(endTime - startTime) / 1000000.0;
        log("Request getDataTime=" + getTime);
        int columnListSize=columnList.size();
        data.append("RowData count=").append(dataListSize).append("<BR>");
        if (dataList != null && dataListSize > 0) {
          for (          TResult rowResult : dataList) {
            int columnSize=rowResult.getColumnValuesSize();
            Map<String,String> columns=Converter.tResultToMap(rowResult,null,false);
            String keyList[]=getDataKeyList(columnSize,columns);
            int perColumnDataCount=columnSize / (columnListSize);
            totalDataCount+=perColumnDataCount;
            if (keyList.length != 0) {
              int maxValuePos=appendScatterChartData(fromTime,indexResponseTime,indexElapsedTime,indexRequestURL,perColumnDataCount,columns,keyList,scatterChartData);
              if (maxValuePos != -1) {
                setSlowRequestData(maxValuePos,perColumnDataCount,agentHashCode,rowResult,columns,keyList,tableNameBuffer,client);
              }
              setSummaryMap(indexRequestURL,indexElapsedTime,perColumnDataCount,columns,keyList);
            }
          }
        }
      }
      getStatisticsData();
      data.append("Data Period:").append(DATE_FORMAT_SHOW_YMD_HM.format(new Date(fromTime)));
      data.append(" ~ ").append(DATE_FORMAT_SHOW_YMD_HM.format(new Date(timestamp))).append(NEW_LINE);
      data.append("Total data count:").append(totalDataCount).append(NEW_LINE);
      scatterChartData.append("]");
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  return data;
}
