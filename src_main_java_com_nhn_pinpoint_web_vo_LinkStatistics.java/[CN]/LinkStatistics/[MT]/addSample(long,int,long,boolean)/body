{
  if (logger.isDebugEnabled()) {
    logger.debug("Add sample. timeslot={}, responseTimeslot={}, callCount={}, failed={}",timestamp,responseTimeslot,callCount,isFailed);
  }
  timestamp=TimeWindowUtils.refineTimestamp(range.getFrom(),range.getTo(),timestamp);
  if (isFailed) {
    failedCount+=callCount;
  }
 else {
    successCount+=callCount;
  }
  if (responseTimeslot == -1) {
    responseTimeslot=SLOT_ERROR;
  }
 else   if (responseTimeslot == 0) {
    responseTimeslot=SLOT_SLOW;
  }
  for (int i=0; i < timeseriesValueList.size(); i++) {
    SortedMap<Long,Long> map=timeseriesValueList.get(i);
    if (i == timeseriesSlotIndex.get(responseTimeslot)) {
      long v=map.containsKey(timestamp) ? map.get(timestamp) + callCount : callCount;
      map.put(timestamp,v);
    }
 else {
      if (!map.containsKey(timestamp)) {
        map.put(timestamp,0L);
      }
    }
  }
}
