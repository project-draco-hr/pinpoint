{
  SpanIdChecker spanIdCheck=new SpanIdChecker(spans);
  Map<Long,List<Span>> parentSpanIdMap=new HashMap<Long,List<Span>>();
  for (  Span span : spans) {
    spanIdCheck.check(span);
    long parentSpanId=span.getParentSpanId();
    List<Span> spanList=parentSpanIdMap.get(parentSpanId);
    if (spanList != null) {
      spanList.add(span);
    }
 else {
      LinkedList<Span> newSpanList=new LinkedList<Span>();
      newSpanList.add(span);
      parentSpanIdMap.put(parentSpanId,newSpanList);
    }
  }
  this.depth=0;
  this.parentSpanIdMap=parentSpanIdMap;
}
