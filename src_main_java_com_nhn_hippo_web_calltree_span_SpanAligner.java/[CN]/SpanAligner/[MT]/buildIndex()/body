{
  SpanIdChecker spanIdCheck=new SpanIdChecker(spans);
  Map<Long,List<SpanBo>> parentSpanIdMap=new HashMap<Long,List<SpanBo>>();
  for (  SpanBo span : spans) {
    spanIdCheck.check(span);
    long parentSpanId=span.getParentSpanId();
    List<SpanBo> spanList=parentSpanIdMap.get(parentSpanId);
    if (spanList != null) {
      spanList.add(span);
    }
 else {
      LinkedList<SpanBo> newSpanList=new LinkedList<SpanBo>();
      newSpanList.add(span);
      parentSpanIdMap.put(parentSpanId,newSpanList);
    }
  }
  this.depth=0;
  this.parentSpanIdMap=parentSpanIdMap;
}
