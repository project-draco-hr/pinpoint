{
  List<SpanEvent> flushData=null;
synchronized (this) {
    addSpanEvent(spanEvent);
    if (storage.size() >= bufferSize) {
      flushData=storage;
      storage=new ArrayList<SpanEvent>(bufferSize);
    }
  }
  if (flushData != null) {
    final SpanChunk spanChunk=spanChunkFactory.create(flushData);
    if (isDebug) {
      logger.debug("flush SpanChunk {}",spanChunk);
    }
    dataSender.send(spanChunk);
  }
}
