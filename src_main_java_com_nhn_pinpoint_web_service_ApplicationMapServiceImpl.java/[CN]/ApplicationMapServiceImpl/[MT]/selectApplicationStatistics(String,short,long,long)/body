{
  if (serviceTypeCode == ServiceType.UNKNOWN_CLOUD.getCode()) {
    serviceTypeCode=ServiceType.HTTP_CLIENT.getCode();
  }
  logger.debug("fetch application statistics {}, {}",applicationName,ServiceType.findServiceType(serviceTypeCode));
  ApplicationStatistics statistics=applicationStatisticsDao.selectApplicationStatistics(applicationName,serviceTypeCode,from,to);
  List<Short> serviceTypeCodeList=new ArrayList<Short>();
  if (ServiceType.findServiceType(serviceTypeCode).isWas()) {
    serviceTypeCodeList.add(ServiceType.HTTP_CLIENT.getCode());
    logger.debug("find applicationName {}",applicationName);
    Application app=hostApplicationMapDao.findApplicationName(applicationName,from,to);
    if (app != null) {
      applicationName=app.getApplicationName();
      logger.debug("   replace applicationName {} {}",applicationName,serviceTypeCode);
    }
  }
  for (  short svcType : serviceTypeCodeList) {
    logger.debug("fetch application statistics {}, {}",applicationName,ServiceType.findServiceType(svcType));
    ApplicationStatistics stat=applicationStatisticsDao.selectApplicationStatistics(applicationName,svcType,from,to);
    statistics.mergeWith(stat);
  }
  return statistics;
}
