{
  final int channelId=allocateChannelId();
  StreamChannel streamChannel=new StreamChannel(channelId);
  streamChannel.setChannel(channel);
  StreamChannel old=channelMap.put(channelId,streamChannel);
  if (old != null) {
    throw new PinpointSocketException("already channelId exist:" + channelId + " streamChannel:"+ old);
  }
  streamChannel.setClientStreamChannelManager(this);
  return streamChannel;
}
