{
  Channel channel=ctx.getChannel();
  if (channel.isOpen()) {
    String body=request.getContent().readable() ? new String(request.getContent().array()) : "";
    String cause=stackTraceToStr(e.getCause());
    logger.error("exceptionCaught : method={} \r\nURI={}, \r\nheaders={}, \r\nbody={}, \r\ncauseBy={}",request.getMethod().getName(),request.getUri(),request.getHeaders(),body,cause);
    if (channel.isWritable() && !(e.getCause() instanceof java.io.IOException)) {
      HttpResponse response=new DefaultHttpResponse(HTTP_1_1,HttpResponseStatus.INTERNAL_SERVER_ERROR);
      response.setHeader(CONTENT_TYPE,"application/json; charset=UTF-8");
      response.setContent(ChannelBuffers.copiedBuffer(this.getResultString(500,"Internal Server Error",e.getCause().toString()),CharsetUtil.UTF_8));
      channel.write(response);
      String uri=request.getUri().substring(1);
      HttpMethod reqMethod=request.getMethod();
    }
    channel.close();
  }
}
