{
  if (skipLogicStateList != null) {
    for (    PinpointServerStateCode skipLogicState : skipLogicStateList) {
      if (this.currentState == skipLogicState) {
        return currentState;
      }
    }
  }
  boolean enable=this.currentState.canChangeState(nextState);
  if (enable) {
    this.beforeState=this.currentState;
    this.currentState=nextState;
    return null;
  }
  PinpointServerStateCode checkBefore=this.beforeState;
  PinpointServerStateCode checkCurrent=this.currentState;
  String errorMessage=cannotChangeMessage(checkBefore,checkCurrent,nextState);
  this.beforeState=this.currentState;
  this.currentState=PinpointServerStateCode.ERROR_ILLEGAL_STATE_CHANGE;
  if (throwException) {
    throw new IllegalStateException(errorMessage);
  }
 else {
    logger.warn(errorMessage);
    return beforeState;
  }
}
