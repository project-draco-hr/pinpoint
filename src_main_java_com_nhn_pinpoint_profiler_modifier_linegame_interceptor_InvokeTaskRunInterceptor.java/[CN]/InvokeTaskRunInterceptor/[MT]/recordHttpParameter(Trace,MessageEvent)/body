{
  final Object message=e.getMessage();
  if (message instanceof org.jboss.netty.handler.codec.http.HttpRequest) {
    final org.jboss.netty.handler.codec.http.HttpRequest request=(org.jboss.netty.handler.codec.http.HttpRequest)message;
    final HttpMethod reqMethod=request.getMethod();
    if (equalMethod(HttpMethod.POST,reqMethod) || equalMethod(HttpMethod.PUT,reqMethod) || equalMethod(HttpMethod.DELETE,reqMethod)) {
      ChannelBuffer content=request.getContent();
      int contentSize=content.readableBytes();
      if (contentSize > 0) {
        if (contentSize > entityDumpSize) {
          contentSize=entityDumpSize;
        }
        final Charset charset=getCharset(request);
        String bodyStr=content.toString(content.readerIndex(),contentSize,charset);
        if (bodyStr != null && bodyStr.length() > 0) {
          trace.recordAttribute(AnnotationKey.HTTP_PARAM_ENTITY,bodyStr);
        }
      }
    }
 else     if (equalMethod(HttpMethod.GET,reqMethod)) {
      String parameters=getRequestParameter(request,paramDumpSize);
      if (parameters != null && parameters.length() > 0) {
        trace.recordAttribute(AnnotationKey.HTTP_PARAM,parameters);
      }
    }
  }
}
