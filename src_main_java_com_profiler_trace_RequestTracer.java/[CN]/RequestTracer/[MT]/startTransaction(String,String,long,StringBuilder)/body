{
  long cpuUserTime[]=getThreadTime();
  String tempRequestID=Thread.currentThread().getName() + "_" + System.nanoTime();
  int tempRequestHashCode=tempRequestID.hashCode();
  currentRequestID.set(tempRequestID);
  currentRequestHash.set(tempRequestHashCode);
  requestSet.add(tempRequestID);
  RequestThriftDTO dto=new RequestThriftDTO(Agent.getInstance().getAgentHashCode(),tempRequestHashCode,TomcatProfilerConstant.DATA_TYPE_REQUEST,requestTime,cpuUserTime[0],cpuUserTime[1]);
  dto.setClientIP(clientIP);
  dto.setRequestURL(requestURL);
  int paramsLength=params.length();
  if (paramsLength > 0) {
    params.deleteCharAt(paramsLength - 1);
    dto.setExtraData1(params.toString());
  }
  DataSender.getInstance().addDataToSend(dto);
}
