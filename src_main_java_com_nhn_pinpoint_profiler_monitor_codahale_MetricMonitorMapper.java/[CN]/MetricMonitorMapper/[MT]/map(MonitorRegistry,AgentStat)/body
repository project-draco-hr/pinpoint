{
  if (agentStat == null) {
    throw new NullPointerException("AgentStat is null");
  }
  if (agentStat.getSetField() == null) {
    throw new NullPointerException("AgentStat has no statistics");
  }
  if (!(registry instanceof MetricMonitorRegistry)) {
    throw new InvalidParameterException("not a MetricMonitorRegistry : " + registry.getClass());
  }
  MetricRegistry r=((MetricMonitorRegistry)registry).getRegistry();
  Map<String,Gauge> map=r.getGauges();
  if (map == null) {
    return;
  }
  _Fields type=agentStat.getSetField();
  Object typeObject=agentStat.getFieldValue(type);
  long timestamp=System.currentTimeMillis();
switch (type) {
case CMS:
    StatWithCmsCollector cms=(StatWithCmsCollector)typeObject;
  cms.setTimestamp(timestamp);
for (StatWithCmsCollector._Fields each : StatWithCmsCollector.metaDataMap.keySet()) {
  Gauge value=map.get(convertName(each.name()));
  if (value != null) {
    cms.setFieldValue(each,value.getValue());
  }
}
break;
case G1:
StatWithG1Collector g1=(StatWithG1Collector)typeObject;
g1.setTimestamp(timestamp);
for (StatWithG1Collector._Fields each : StatWithG1Collector.metaDataMap.keySet()) {
Gauge value=map.get(convertName(each.name()));
if (value != null) {
g1.setFieldValue(each,value.getValue());
}
}
break;
case PARALLEL:
StatWithParallelCollector parallel=(StatWithParallelCollector)typeObject;
parallel.setTimestamp(timestamp);
for (StatWithParallelCollector._Fields each : StatWithParallelCollector.metaDataMap.keySet()) {
Gauge value=map.get(convertName(each.name()));
if (value != null) {
parallel.setFieldValue(each,value.getValue());
}
}
break;
}
}
