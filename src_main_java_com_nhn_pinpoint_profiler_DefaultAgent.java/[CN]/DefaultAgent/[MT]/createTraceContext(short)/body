{
  final int jdbcSqlCacheSize=profilerConfig.getJdbcSqlCacheSize();
  final DefaultTraceContext traceContext=new DefaultTraceContext(jdbcSqlCacheSize,serverType);
  traceContext.setAgentInformation(this.agentInformation);
  traceContext.setPriorityDataSender(this.tcpDataSender);
  final Sampler sampler=createSampler();
  logger.info("SamplerType:{}",sampler.getClass());
  traceContext.setSampler(sampler);
  traceContext.setProfilerConfig(profilerConfig);
  final StorageFactory storageFactory=createStorageFactory();
  logger.info("StorageFactoryType:{}",storageFactory.getClass());
  traceContext.setStorageFactory(storageFactory);
  return traceContext;
}
