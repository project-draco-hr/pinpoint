{
  logger.info("Stopping {} Agent.",ProductInfo.CAMEL_NAME);
  this.heartBitChecker.stop();
  tAgentInfo.setEndStatus(0);
  tAgentInfo.setEndTimestamp(System.currentTimeMillis());
  this.tcpDataSender.send(tAgentInfo);
  changeStatus(AgentStatus.STOPPING);
  this.agentStatMonitor.stop();
  this.spanDataSender.stop();
  this.statDataSender.stop();
  this.tcpDataSender.stop();
  if (this.socket != null) {
    this.socket.close();
  }
  if (this.factory != null) {
    this.factory.release();
  }
  changeStatus(AgentStatus.STOPPED);
}
