{
  StopWatch watch=new StopWatch();
  watch.start("getAgentStat");
  List<AgentStat> agentStatList=agentStatService.selectAgentStatList(agentId,from,to);
  watch.stop();
  if (logger.isInfoEnabled()) {
    logger.info("getAgentStat(agentId={}, from={}, to={}) : {}ms",agentId,from,to,watch.getLastTaskTimeMillis());
  }
  AgentStatLineChart chart=new AgentStatLineChart();
  for (  AgentStat each : agentStatList) {
    chart.addData(each);
  }
  response.setContentType("text/javascript; charset=UTF-8");
  PrintWriter out=response.getWriter();
  if (jsonpCallback != null) {
    out.write(jsonpCallback + "(" + jsonObjectMapper.writeValueAsString(chart)+ ")");
  }
 else {
    out.write(jsonObjectMapper.writeValueAsString(chart));
  }
  out.close();
}
