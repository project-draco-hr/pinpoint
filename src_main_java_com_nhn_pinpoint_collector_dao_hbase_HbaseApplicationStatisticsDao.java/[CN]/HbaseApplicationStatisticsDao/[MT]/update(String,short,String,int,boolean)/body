{
  if (applicationName == null) {
    throw new IllegalArgumentException("applicationName is null.");
  }
  if (logger.isDebugEnabled()) {
    logger.debug("[UpdatingApplicationMapStatistics] " + applicationName + ", "+ ServiceType.findServiceType(serviceType)+ ", "+ agentId+ ", "+ elapsed+ ", "+ isError);
  }
  if (agentId == null) {
    agentId="";
  }
  long acceptedTime=acceptedTimeService.getAcceptedTime();
  long rowTimeSlot=TimeSlot.getStatisticsRowSlot(acceptedTime);
  RowKey statisticsRowKey=new StatisticsRowKey(applicationName,serviceType,rowTimeSlot);
  short columnSlotNumber=ApplicationStatisticsUtils.getSlotNumber(serviceType,elapsed,isError);
  ColumnName statisticsColumnName=new StatisticsColumnName(agentId,columnSlotNumber);
  if (useBulk) {
    RowInfo statisticsKey=new DefaultRowInfo(statisticsRowKey,statisticsColumnName);
    counter.increment(statisticsKey,1L);
  }
 else {
    final byte[] rowKey=statisticsRowKey.getRowKey();
    byte[] columnName=statisticsColumnName.getColumnName();
    increment(rowKey,columnName,1L);
  }
}
