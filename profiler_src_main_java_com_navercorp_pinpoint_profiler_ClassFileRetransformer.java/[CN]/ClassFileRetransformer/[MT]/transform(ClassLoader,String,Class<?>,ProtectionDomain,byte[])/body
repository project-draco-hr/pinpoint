{
  if (classBeingRedefined == null) {
    return null;
  }
  final Modifier modifier=targets.remove(classBeingRedefined);
  if (modifier != null) {
    try {
      return modifier.modify(loader,className.replace('/','.'),protectionDomain,classfileBuffer);
    }
 catch (    Throwable t) {
      logger.warn("Failed to retransform " + className + " with "+ modifier);
      return null;
    }
  }
  final ClassFileTransformer transformer=transformerMap.remove(classBeingRedefined);
  if (transformer != null) {
    try {
      return transformer.transform(loader,className,classBeingRedefined,protectionDomain,classfileBuffer);
    }
 catch (    Throwable t) {
      logger.warn("Failed to retransform " + className + " with "+ transformer);
      return null;
    }
  }
  logger.warn("Unexpected retransform request for " + className);
  return null;
}
