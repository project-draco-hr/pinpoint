{
synchronized (this) {
    if (this.agentStatus == AgentStatus.RUNNING) {
      changeStatus(AgentStatus.STOPPED);
    }
 else {
      logger.warn("Cannot stop agent. Current status = [{}]",this.agentStatus);
      return;
    }
  }
  logger.info("Stopping {} Agent.",ProductInfo.CAMEL_NAME);
  this.agentInfoSender.stop();
  this.agentStatMonitor.stop();
  this.spanDataSender.stop();
  this.statDataSender.stop();
  this.tcpDataSender.stop();
  if (this.socket != null) {
    this.socket.close();
  }
  if (this.factory != null) {
    this.factory.release();
  }
  PLoggerFactory.unregister(this.binder);
  InterceptorRegistry.unbind(this.lock);
}
