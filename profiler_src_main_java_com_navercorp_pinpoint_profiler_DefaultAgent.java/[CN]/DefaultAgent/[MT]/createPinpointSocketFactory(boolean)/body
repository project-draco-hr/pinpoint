{
  Map<String,Object> properties=this.agentInformation.toMap();
  properties.put(AgentPropertiesType.IP.getName(),serverInfo.getHostip());
  PinpointSocketFactory pinpointSocketFactory=new PinpointSocketFactory();
  pinpointSocketFactory.setTimeoutMillis(1000 * 5);
  pinpointSocketFactory.setProperties(properties);
  if (isSupportServerMode) {
    pinpointSocketFactory.setMessageListener(new CommandDispatcher());
  }
  return pinpointSocketFactory;
}
