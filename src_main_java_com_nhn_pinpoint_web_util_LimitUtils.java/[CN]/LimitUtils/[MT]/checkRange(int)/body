{
  if (limit < 0) {
    throw new IllegalArgumentException("negative limit:" + limit);
  }
  if (limit > MAX) {
    return MAX;
  }
  return limit;
}
