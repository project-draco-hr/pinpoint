{
  Class<?> type;
  try {
    type=classLoader.loadClass(metadataAccessorTypeName);
  }
 catch (  ClassNotFoundException e) {
    throw new PinpointException("Fail to load metadata accessor: " + metadataAccessorTypeName,e);
  }
  if (!TraceValue.class.isAssignableFrom(type)) {
    throw new PinpointException("Given type " + metadataAccessorTypeName + " is not a subtype of TraceValue");
  }
  Class<? extends TraceValue> metadataAccessorType=(Class<? extends TraceValue>)type;
  if (strategy == null) {
    target.addTraceValue(metadataAccessorType);
  }
 else {
    if (strategy instanceof ByConstructor) {
      String javaExpression="new " + ((ByConstructor)strategy).getClassName() + "();";
      target.addTraceValue(metadataAccessorType,javaExpression);
    }
 else {
      throw new PinpointException("Unsupported strategy: " + strategy);
    }
  }
}
