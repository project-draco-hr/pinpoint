{
  ClusterPointRepository clusterPointRepository=clusterPointRouter.getTargetClusterPointRepository();
  SocketChannel socketChannel=mock(SocketChannel.class);
  ChannelContext channelContext=new ChannelContext(socketChannel,null);
  channelContext.setChannelProperties(getParams());
  ClusterPoint clusterPoint=new ChannelContextClusterPoint(channelContext);
  clusterPointRepository.addClusterPoint(clusterPoint);
  List<TargetClusterPoint> clusterPointList=clusterPointRepository.getClusterPointList();
  Assert.assertEquals(1,clusterPointList.size());
  Assert.assertNull(findClusterPoint("a","a",-1L,clusterPointList));
  Assert.assertNull(findClusterPoint("application","a",-1L,clusterPointList));
  Assert.assertEquals(clusterPoint,findClusterPoint("application","agent",currentTime,clusterPointList));
  boolean isAdd=clusterPointRepository.addClusterPoint(new ChannelContextClusterPoint(channelContext));
  Assert.assertFalse(isAdd);
  clusterPointRepository.removeClusterPoint(new ChannelContextClusterPoint(channelContext));
  clusterPointList=clusterPointRepository.getClusterPointList();
  Assert.assertEquals(0,clusterPointList.size());
  Assert.assertNull(findClusterPoint("application","agent",currentTime,clusterPointList));
}
