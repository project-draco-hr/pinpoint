{
  String pluginPath=agent.getAgentPath() + File.separatorChar + "plugin";
  PluginLoader loader=PluginLoader.get(pluginPath);
  PluginClassLoaderFactory classLoaderFactory=new PluginClassLoaderFactory(loader.getPluginJars());
  List<ProfilerPlugin> plugins=loader.loadPlugins();
  ProfilerPluginContext pluginContext=new ProfilerPluginContext(byteCodeInstrumentor,agent.getTraceContext());
  for (  ProfilerPlugin plugin : plugins) {
    for (    ClassEditorFactoryMapping mapping : plugin.getClassEditorMappings(pluginContext)) {
      modifierRepository.addModifier(new ClassEditorAdaptor(byteCodeInstrumentor,agent,mapping,pluginContext,classLoaderFactory));
    }
  }
}
