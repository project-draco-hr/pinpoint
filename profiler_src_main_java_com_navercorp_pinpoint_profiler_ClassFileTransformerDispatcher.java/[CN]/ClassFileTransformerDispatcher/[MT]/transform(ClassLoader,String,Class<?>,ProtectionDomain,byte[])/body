{
  if (className.contains("CacheManager")) {
    logger.debug("Start CacheManager");
  }
  if (skipFilter.doFilter(classLoader,className,classBeingRedefined,protectionDomain,classFileBuffer)) {
    if (className.equals("net/spy/memcached/CacheManager")) {
      logger.debug("skip CacheManager");
    }
    return null;
  }
  AbstractModifier findModifier=this.modifierRegistry.findModifier(className);
  if (findModifier == null) {
    if (className.equals("net/spy/memcached/CacheManager")) {
      logger.debug("no modifier for CacheManager");
    }
    if (this.profilerConfig.getProfilableClassFilter().filter(className)) {
      findModifier=this.modifierRegistry.findModifier("*");
    }
 else {
      return null;
    }
  }
  if (isDebug) {
    logger.debug("[transform] cl:{} className:{} Modifier:{}",classLoader,className,findModifier.getClass().getName());
  }
  final String javassistClassName=className.replace('/','.');
  try {
    final Thread thread=Thread.currentThread();
    final ClassLoader before=getContextClassLoader(thread);
    thread.setContextClassLoader(this.agentClassLoader);
    try {
      return findModifier.modify(classLoader,javassistClassName,protectionDomain,classFileBuffer);
    }
  finally {
      thread.setContextClassLoader(before);
    }
  }
 catch (  Throwable e) {
    logger.error("Modifier:{} modify fail. cl:{} ctxCl:{} agentCl:{} Cause:{}",findModifier.getTargetClass(),classLoader,Thread.currentThread().getContextClassLoader(),agentClassLoader,e.getMessage(),e);
    return null;
  }
}
