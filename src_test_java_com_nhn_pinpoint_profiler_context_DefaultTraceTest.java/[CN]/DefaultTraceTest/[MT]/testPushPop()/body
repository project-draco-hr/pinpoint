{
  DefaultTrace trace=new DefaultTrace();
  BypassStorage bypassStorage=new BypassStorage();
  bypassStorage.setDataSender(LoggingDataSender.DEFAULT_LOGGING_DATA_SENDER);
  trace.setStorage(bypassStorage);
  Assert.assertEquals(0,trace.getCallStackDepth());
  trace.traceBlockBegin();
  Assert.assertEquals(1,trace.getCallStackDepth());
  trace.traceBlockBegin();
  Assert.assertEquals(2,trace.getCallStackDepth());
  trace.traceBlockEnd();
  Assert.assertEquals(1,trace.getCallStackDepth());
  trace.traceBlockEnd();
  Assert.assertEquals(0,trace.getCallStackDepth());
  trace.traceRootBlockEnd();
}
