{
  if (logger.isInfoEnabled()) {
    logger.info("start ioThread localAddress:{}, IoThread:{}",socket.getLocalAddress(),Thread.currentThread().getName());
  }
  final SocketAddress localSocketAddress=socket.getLocalSocketAddress();
  final boolean debugEnabled=logger.isDebugEnabled();
  while (state.get()) {
    DatagramPacket packet=read0();
    if (packet == null) {
      continue;
    }
    if (packet.getLength() == 0) {
      if (debugEnabled) {
        logger.debug("length is 0 ip:{}, port:{}",packet.getAddress(),packet.getPort());
      }
      return;
    }
    if (debugEnabled) {
      logger.debug("pool getActiveCount:{}",worker.getActiveCount());
    }
    try {
      worker.execute(new DispatchPacket(packet));
    }
 catch (    RejectedExecutionException ree) {
      rejectedCounter.inc();
      final int error=rejectedExecutionCount.incrementAndGet();
      final int mod=100;
      if ((error % mod) == 0) {
        logger.warn("RejectedExecutionCount={}",error);
      }
    }
  }
  if (logger.isInfoEnabled()) {
    logger.info("stop ioThread localAddress:{}, IoThread:{}",localSocketAddress,Thread.currentThread().getName());
  }
}
