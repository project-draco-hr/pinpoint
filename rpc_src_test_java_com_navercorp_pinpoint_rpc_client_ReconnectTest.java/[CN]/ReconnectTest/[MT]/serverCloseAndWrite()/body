{
  PinpointServerSocket serverSocket=PinpointRPCTestUtils.createServerSocket(bindPort);
  PinpointSocket socket=socketFactory.connect("127.0.0.1",bindPort);
  PinpointRPCTestUtils.close(serverSocket);
  byte[] randomByte=TestByteUtils.createRandomByte(10);
  Future<ResponseMessage> response=socket.request(randomByte);
  response.await();
  try {
    response.getResult();
    Assert.fail("expected exception");
  }
 catch (  Exception e) {
  }
  Thread.sleep(1000 * 3);
  PinpointRPCTestUtils.close(socket);
}
