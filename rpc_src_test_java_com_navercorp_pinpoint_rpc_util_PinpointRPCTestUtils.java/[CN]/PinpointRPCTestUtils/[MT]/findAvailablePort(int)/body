{
  int bindPort=defaultPort;
  ServerSocket serverSocket=null;
  while (0xFFFF >= bindPort && serverSocket == null) {
    try {
      serverSocket=new ServerSocket(bindPort);
    }
 catch (    IOException ex) {
      bindPort++;
    }
  }
  if (serverSocket != null) {
    serverSocket.close();
    return bindPort;
  }
  throw new IOException("can't find available port.");
}
