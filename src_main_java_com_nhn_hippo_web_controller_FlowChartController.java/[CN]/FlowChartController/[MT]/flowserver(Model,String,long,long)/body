{
  String[] agentIds=flow.selectAgentIdsFromApplicationName(applicationName);
  StopWatch watch=new StopWatch();
  watch.start("scanTraceindex");
  Set<TraceId> traceIds=flow.selectTraceIdsFromTraceIndex(agentIds,from,to);
  watch.stop();
  logger.info("time:{} {}",watch.getLastTaskTimeMillis(),traceIds.size());
  watch.start("selectServerCallTree");
  ServerCallTree callTree=flow.selectServerCallTree(traceIds);
  watch.stop();
  logger.info("time:{}",watch.getLastTaskTimeMillis());
  model.addAttribute("nodes",callTree.getNodes());
  model.addAttribute("links",callTree.getLinks());
  model.addAttribute("businessTransactions",callTree.getBusinessTransactions().getBusinessTransactionIterator());
  model.addAttribute("traces",callTree.getBusinessTransactions().getTracesIterator());
  logger.debug("callTree:{}",callTree);
  return "flowserver";
}
