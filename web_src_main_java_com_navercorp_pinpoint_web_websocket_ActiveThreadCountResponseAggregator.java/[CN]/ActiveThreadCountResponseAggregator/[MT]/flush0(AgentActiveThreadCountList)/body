{
  Map resultMap=createResultMap(activeThreadCountList,System.currentTimeMillis());
  try {
    TextMessage responseTextMessage=new TextMessage(messageConverter.getResponseTextMessage(ActiveThreadCountHandler.API_ACTIVE_THREAD_COUNT,resultMap));
    for (    WebSocketSession webSocketSession : webSocketSessions) {
      try {
        logger.debug("flush webSocketSession:{}, response:{}",webSocketSession,responseTextMessage);
        webSocketSession.sendMessage(responseTextMessage);
      }
 catch (      Exception e) {
        logger.warn("failed while flush message(applicationName:{}, session:{}). Error:{}",webSocketSession,applicationName,e.getMessage(),e);
      }
    }
  }
 catch (  JsonProcessingException e) {
    logger.warn("failed while convert message. applicationName:{}, original:{}, message:{}.",applicationName,resultMap,e.getMessage(),e);
  }
}
