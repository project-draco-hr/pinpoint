{
  StringBuilder code=new StringBuilder();
  code.append("{");
  code.append("if (com.profiler.context.Trace.getCurrentTraceId() == null) { com.profiler.context.Trace.setTraceId(__nextTraceId); }");
  code.append("if (newState == net.spy.memcached.ops.OperationState.READING) {");
  code.append("	java.net.SocketAddress socketAddress = handlingNode.getSocketAddress();");
  code.append("	if (socketAddress instanceof java.net.InetSocketAddress) {");
  code.append("		java.net.InetSocketAddress addr = (java.net.InetSocketAddress) handlingNode.getSocketAddress();");
  code.append("		com.profiler.context.Trace.recordEndPoint(addr.getHostName(), addr.getPort());");
  code.append("	}");
  code.append("	com.profiler.context.Trace.recordRpcName(\"arcus\", \"\");");
  code.append("	com.profiler.context.Trace.recordAttribute(\"arcus.command\", ((cmd == null) ? \"UNKNOWN\" : new String(cmd.array())));");
  code.append("	System.out.println(\"CS\");");
  code.append("	com.profiler.context.Trace.record(com.profiler.context.Annotation.ClientSend);");
  code.append("} else if (newState == net.spy.memcached.ops.OperationState.COMPLETE) {");
  code.append("	System.out.println(\"CR\");");
  code.append("	com.profiler.context.Trace.record(com.profiler.context.Annotation.ClientRecv);");
  code.append("}");
  code.append("}");
  return code.toString();
}
