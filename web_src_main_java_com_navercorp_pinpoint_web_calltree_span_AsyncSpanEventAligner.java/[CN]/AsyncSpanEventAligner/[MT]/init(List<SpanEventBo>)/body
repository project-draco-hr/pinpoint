{
  final Map<Integer,List<SpanEventBo>> allEventMap=new HashMap<Integer,List<SpanEventBo>>();
  for (  SpanEventBo spanEvent : spanEventBoList) {
    final int id=spanEvent.getAsyncId();
    List<SpanEventBo> list=allEventMap.get(id);
    if (list == null) {
      list=new ArrayList<SpanEventBo>();
      list.add(spanEvent);
      allEventMap.put(id,list);
    }
 else {
      list.add(spanEvent);
    }
  }
  for (  List<SpanEventBo> list : allEventMap.values()) {
    Collections.sort(list,new Comparator<SpanEventBo>(){
      public int compare(      SpanEventBo source,      SpanEventBo target){
        return source.getSequence() - target.getSequence();
      }
    }
);
  }
  return allEventMap;
}
