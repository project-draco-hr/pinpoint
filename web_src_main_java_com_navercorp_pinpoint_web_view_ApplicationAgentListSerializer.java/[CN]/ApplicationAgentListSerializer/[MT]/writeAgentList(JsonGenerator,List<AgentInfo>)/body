{
  jgen.writeStartArray();
  for (  AgentInfo agentInfo : agentList) {
    jgen.writeStartObject();
    jgen.writeStringField("applicationName",agentInfo.getApplicationName());
    jgen.writeStringField("agentId",agentInfo.getAgentId());
    jgen.writeNumberField("startTime",agentInfo.getStartTimestamp());
    jgen.writeStringField("hostName",agentInfo.getHostName());
    jgen.writeStringField("ip",agentInfo.getIp());
    jgen.writeStringField("ports",agentInfo.getPorts());
    final ServiceType serviceType=serviceTypeRegistryService.findServiceType(agentInfo.getServiceTypeCode());
    jgen.writeStringField("serviceType",serviceType.getDesc());
    jgen.writeNumberField("pid",agentInfo.getPid());
    jgen.writeStringField("vmVersion",agentInfo.getVmVersion());
    jgen.writeStringField("agentVersion",agentInfo.getAgentVersion());
    jgen.writeObjectField("serverMetaData",agentInfo.getServerMetaData());
    AgentStatus agentStatus=agentInfo.getStatus();
    if (agentStatus == null) {
      jgen.writeNumberField("endTimeStamp",0);
      jgen.writeStringField("endStatus",AgentLifeCycleState.UNKNOWN.getDesc());
    }
 else {
      jgen.writeNumberField("endTimeStamp",agentStatus.getEventTimestamp());
      jgen.writeStringField("endStatus",agentStatus.getState().getDesc());
    }
    jgen.writeObjectField("status",agentStatus);
    jgen.writeNumberField("initialStartTime",agentInfo.getInitialStartTimestamp());
    if (matcherGroupList != null) {
      jgen.writeFieldName("linkList");
      jgen.writeStartArray();
      for (      MatcherGroup matcherGroup : matcherGroupList) {
        if (matcherGroup.ismatchingType(agentInfo)) {
          LinkInfo linkInfo=matcherGroup.makeLinkInfo(agentInfo);
          jgen.writeStartObject();
          jgen.writeStringField("linkName",linkInfo.getLinkName());
          jgen.writeStringField("linkURL",linkInfo.getLinkUrl());
          jgen.writeStringField("linkType",linkInfo.getLinktype());
          jgen.writeEndObject();
        }
      }
      jgen.writeEndArray();
    }
    jgen.writeEndObject();
  }
  jgen.writeEndArray();
}
