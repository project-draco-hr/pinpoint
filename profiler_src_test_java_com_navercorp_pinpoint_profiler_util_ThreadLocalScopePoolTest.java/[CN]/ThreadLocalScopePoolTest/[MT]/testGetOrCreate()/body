{
  ScopePool pool=new ThreadLocalScopePool();
  Scope scope=pool.getScope(new DefaultScopeDefinition("test"));
  scope.tryEnter(ExecutionPoint.BOUNDARY);
  scope.entered(ExecutionPoint.BOUNDARY);
  scope.tryEnter(ExecutionPoint.BOUNDARY);
  Assert.assertNull(scope.getAttachment());
  Assert.assertEquals(scope.getOrCreateAttachment(new AttachmentFactory(){
    @Override public Object createAttachment(){
      return "test";
    }
  }
),"test");
  scope.tryLeave(ExecutionPoint.BOUNDARY);
  Assert.assertEquals(scope.getAttachment(),"test");
  Assert.assertTrue(scope.tryLeave(ExecutionPoint.BOUNDARY));
  Assert.assertEquals("name",scope.getName(),"test");
}
