{
  final Channel channel=e.getChannel();
  final ChannelContext channelContext=getChannelContext(channel);
  if (channelContext.isClosePacketReceived()) {
    if (logger.isDebugEnabled()) {
      logger.debug("client channelClosed. ClosePacket already received. {}",channel);
    }
  }
 else   if (released) {
    if (logger.isDebugEnabled()) {
      logger.debug("client channelClosed. server shutdown. {}",channel);
    }
  }
 else {
    logger.warn("Unexpected Client channelClosed {}",channel);
  }
  channelContext.closeAllStreamChannel();
}
