{
  if (applicationName == null) {
    return null;
  }
  if (agentId == null) {
    return null;
  }
  if (startTimeMillis <= 0) {
    return null;
  }
  List<ChannelContext> channelContextList=new ArrayList<ChannelContext>();
  Iterator<Channel> iterator=channelGroup.iterator();
  while (iterator.hasNext()) {
    Channel channel=iterator.next();
    ChannelContext context=getChannelContext(channel);
    if (context.getCurrentStateCode() == PinpointServerSocketStateCode.RUN) {
      Map agentProperties=context.getAgentProperties();
      if (!applicationName.equals(agentProperties.get(AgentPropertiesType.APPLICATION_NAME))) {
        continue;
      }
      if (!agentId.equals(agentProperties.get(AgentPropertiesType.AGENT_ID))) {
        continue;
      }
      if (startTimeMillis != (Long)agentProperties.get(AgentPropertiesType.START_TIMESTAMP)) {
        continue;
      }
      channelContextList.add(context);
    }
  }
  if (channelContextList.size() == 0) {
    return null;
  }
  if (channelContextList.size() == 1) {
    return channelContextList.get(0);
  }
 else {
    logger.warn("Ambigous Channel Context {}, {}, {} (Valid Agent list={}).",applicationName,agentId,startTimeMillis,channelContextList);
    return null;
  }
}
