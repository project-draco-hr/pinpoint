{
  logger.debug("sendPing");
  final TimerTask pintTask=new TimerTask(){
    @Override public void run(    Timeout timeout) throws Exception {
      if (timeout.isCancelled() || timeout.isExpired()) {
        newPingTimeout(this);
        return;
      }
      final ChannelGroupFuture write=channelGroup.write(PingPacket.PING_PACKET);
      write.addListener(new ChannelGroupFutureListener(){
        @Override public void operationComplete(        ChannelGroupFuture future) throws Exception {
          if (logger.isDebugEnabled()) {
            for (            ChannelFuture channelFuture : future) {
              if (!channelFuture.isDone()) {
                final Throwable cause=channelFuture.getCause();
                logger.debug("ping write fail channel:{} Caused:{}",channelFuture.getChannel(),cause.getMessage(),cause);
              }
            }
          }
        }
      }
);
      newPingTimeout(this);
    }
  }
;
  newPingTimeout(pintTask);
}
