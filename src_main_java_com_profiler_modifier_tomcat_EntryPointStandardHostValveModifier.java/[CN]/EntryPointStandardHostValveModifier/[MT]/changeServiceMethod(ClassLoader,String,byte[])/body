{
  classPool.insertClassPath(new ByteArrayClassPath(javassistClassName,classfileBuffer));
  try {
    addRequestTracerToCurrentClassLoader(classLoader);
    CtClass cc=classPool.get(javassistClassName);
    CtClass[] params=new CtClass[2];
    params[0]=classPool.getCtClass("org.apache.catalina.connector.Request");
    params[1]=classPool.getCtClass("org.apache.catalina.connector.Response");
    CtMethod serviceMethod=cc.getDeclaredMethod("invoke",params);
    serviceMethod.insertBefore(getInvokeMethodBeforeInsertCode());
    serviceMethod.insertAfter(getInvokeMethodAfterInsertCode());
    CtClass exceptionType=classPool.get("java.lang.Throwable");
    serviceMethod.addCatch(getInvokeMethodCatchInsertCode(),exceptionType);
    printClassConvertComplete(javassistClassName);
    return cc.toBytecode();
  }
 catch (  Exception e) {
    if (logger.isLoggable(Level.WARNING)) {
      logger.log(Level.WARNING,e.getMessage(),e);
    }
  }
  return null;
}
