{
  final String agentId=agentEventBo.getAgentId();
  final long eventTimestamp=agentEventBo.getEventTimestamp();
  final AgentEventType eventType=agentEventBo.getEventType();
  AgentEvent agentEvent=new AgentEvent(agentId,eventTimestamp,eventType);
  agentEvent.setStartTimestamp(agentEventBo.getStartTimestamp());
  if (includeEventMessage) {
    try {
      agentEvent.setEventMessage(this.agentEventMessageDeserializer.deserialize(eventType,agentEventBo.getEventBody()));
    }
 catch (    UnsupportedEncodingException e) {
      logger.warn("error deserializing event message",e);
    }
  }
  return agentEvent;
}
