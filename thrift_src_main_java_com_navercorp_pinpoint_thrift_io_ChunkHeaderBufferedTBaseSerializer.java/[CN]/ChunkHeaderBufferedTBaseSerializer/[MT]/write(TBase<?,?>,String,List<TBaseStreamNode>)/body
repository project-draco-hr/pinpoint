{
  final ReplaceListCompactProtocol protocol=new ReplaceListCompactProtocol(new ByteArrayOutputStreamTransport(out));
  writeChunkHeader(protocol);
  writeHeader(protocol,locator.headerLookup(base));
  if (list != null && list.size() > 0) {
    protocol.addReplaceField(fieldName,list);
  }
  base.write(protocol);
  if (isOverflow()) {
    flush();
  }
}
