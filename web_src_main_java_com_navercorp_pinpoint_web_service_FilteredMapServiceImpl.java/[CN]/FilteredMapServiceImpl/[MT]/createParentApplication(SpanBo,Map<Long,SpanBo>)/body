{
  final SpanBo parentSpan=transactionSpanMap.get(span.getParentSpanId());
  if (span.isRoot() || parentSpan == null) {
    String applicationName=span.getApplicationId();
    ServiceType serviceType=ServiceType.USER;
    return this.applicationFactory.createApplication(applicationName,serviceType);
  }
 else {
    String parentApplicationName=parentSpan.getApplicationId();
    short parentServiceType=parentSpan.getApplicationServiceType();
    return this.applicationFactory.createApplication(parentApplicationName,parentServiceType);
  }
}
