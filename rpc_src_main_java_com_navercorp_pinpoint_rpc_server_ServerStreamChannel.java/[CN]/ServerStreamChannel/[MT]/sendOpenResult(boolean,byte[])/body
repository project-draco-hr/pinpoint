{
  if (success) {
    if (!state.compareAndSet(OPEN_ARRIVED,RUN)) {
      return false;
    }
    StreamCreateSuccessPacket streamCreateSuccessPacket=new StreamCreateSuccessPacket(channelId);
    this.channel.write(streamCreateSuccessPacket);
    return true;
  }
 else {
    if (!state.compareAndSet(OPEN_ARRIVED,CLOSED)) {
      return false;
    }
    StreamCreateFailPacket streamCreateFailPacket=new StreamCreateFailPacket(channelId,StreamCreateFailPacket.UNKNWON_ERROR);
    this.channel.write(streamCreateFailPacket);
    return true;
  }
}
