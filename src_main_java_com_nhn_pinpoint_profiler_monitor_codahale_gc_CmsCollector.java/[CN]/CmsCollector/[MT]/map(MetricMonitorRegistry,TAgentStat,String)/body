{
  MetricRegistry metricRegistry=registry.getRegistry();
  TJvmGc gc=agentStat.getGc();
  if (gc == null) {
    gc=new TJvmGc();
    agentStat.setGc(gc);
  }
  gc.setType(TJvmGcType.CMS);
  final SortedMap<String,Gauge> gauges=metricRegistry.getGauges();
  gc.setJvmMemoryHeapMax(MetricMonitorValues.getLong(gauges,JVM_MEMORY_HEAP_MAX));
  gc.setJvmMemoryHeapUsed(MetricMonitorValues.getLong(gauges,JVM_MEMORY_HEAP_USED));
  gc.setJvmMemoryNonHeapMax(MetricMonitorValues.getLong(gauges,JVM_MEMORY_NONHEAP_MAX));
  gc.setJvmMemoryNonHeapUsed(MetricMonitorValues.getLong(gauges,JVM_MEMORY_NONHEAP_USED));
  gc.setJvmGcOldCount(MetricMonitorValues.getLong(gauges,JVM_GC_CMS_COUNT));
  gc.setJvmGcOldTime(MetricMonitorValues.getLong(gauges,JVM_GC_CMS_TIME));
}
