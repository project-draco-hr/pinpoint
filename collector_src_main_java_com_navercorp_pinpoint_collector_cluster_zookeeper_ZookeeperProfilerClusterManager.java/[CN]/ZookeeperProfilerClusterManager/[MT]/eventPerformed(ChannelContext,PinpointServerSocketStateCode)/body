{
  if (workerState.isStarted()) {
    logger.info("eventPerformed ChannelContext={}, State={}",channelContext,stateCode);
    Map agentProperties=channelContext.getChannelProperties();
    if (skipAgent(agentProperties)) {
      return;
    }
    if (PinpointServerSocketStateCode.RUN_DUPLEX_COMMUNICATION == stateCode) {
      UpdateJob job=new UpdateJob(channelContext,new byte[0]);
      worker.putJob(job);
      clusterPointRepository.addClusterPoint(new ChannelContextClusterPoint(channelContext));
    }
 else     if (PinpointServerSocketStateCode.isFinished(stateCode)) {
      DeleteJob job=new DeleteJob(channelContext);
      worker.putJob(job);
      clusterPointRepository.removeClusterPoint(new ChannelContextClusterPoint(channelContext));
    }
  }
 else {
    WorkerState state=this.workerState.getCurrentState();
    logger.info("{} invalid state {}.",this.getClass().getSimpleName(),state.toString());
    return;
  }
}
