{
  if (logger.isInfoEnabled()) {
    logger.info("Modifing. {}",javassistClassName);
  }
  try {
    InstrumentClass aClass=byteCodeInstrumentor.getClass(classLoader,javassistClassName,classFileBuffer);
    ConnectMethodInterceptor connectMethodInterceptor=new ConnectMethodInterceptor();
    aClass.addGroupInterceptor("connect",null,connectMethodInterceptor,SCOPE);
    ConnectMethodInterceptor getInputStreamInterceptor=new ConnectMethodInterceptor();
    aClass.addGroupInterceptor("getInputStream",null,getInputStreamInterceptor,SCOPE);
    ConnectMethodInterceptor getOutputStreamInterceptor=new ConnectMethodInterceptor();
    aClass.addGroupInterceptor("getOutputStream",null,getOutputStreamInterceptor,SCOPE);
    aClass.addGetter("__isConnected","connected","boolean");
    if (aClass.hasField("connecting","boolean")) {
      aClass.addGetter("__isConnecting","connecting","boolean");
    }
    return aClass.toBytecode();
  }
 catch (  InstrumentException e) {
    logger.warn("HttpURLConnectionModifier fail. Caused:",e.getMessage(),e);
    return null;
  }
}
