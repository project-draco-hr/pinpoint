{
  if (agentId == null) {
    throw new IllegalArgumentException("agentId must not be null");
  }
  byte[] agentBytes=Bytes.toBytes(agentId);
  if (agentBytes.length > AGENT_NAME_MAX_LEN) {
    throw new IllegalArgumentException("agent.length too big. agent:" + agentId + " length:"+ agentId.length());
  }
  byte[] buffer=new byte[AGENT_NAME_MAX_LEN + SHORT_BYTE_LENGTH + INT_BYTE_LENGTH+ LONG_BYTE_LENGTH];
  Bytes.putBytes(buffer,0,agentBytes,0,agentBytes.length);
  BytesUtils.writeShort(identifier,buffer,AGENT_NAME_MAX_LEN);
  BytesUtils.writeInt(keyCode,buffer,AGENT_NAME_MAX_LEN + SHORT_BYTE_LENGTH);
  long reverseCurrentTimeMillis=TimeUtils.reverseCurrentTimeMillis(agentStartTime);
  BytesUtils.writeLong(reverseCurrentTimeMillis,buffer,AGENT_NAME_MAX_LEN + SHORT_BYTE_LENGTH + INT_BYTE_LENGTH);
  return buffer;
}
