{
  recordTraceId(traceId);
  final AgentInformation agentInformation=DefaultAgent.getInstance().getAgentInformation();
  this.setAgentId(agentInformation.getAgentId());
  this.setApplicationName(agentInformation.getApplicationName());
  this.setAgentStartTime(agentInformation.getStartTime());
  List<TAnnotation> annotationList=new ArrayList<TAnnotation>(traceAnnotationList.size());
  for (  TraceAnnotation traceAnnotation : traceAnnotationList) {
    annotationList.add(traceAnnotation.toThrift());
  }
  this.setAnnotations(annotationList);
  List<SpanEvent> spanEventList=this.getPSpanEventList();
  if (spanEventList != null && spanEventList.size() != 0) {
    List<TSpanEvent> tSpanEventList=new ArrayList<TSpanEvent>(spanEventList.size());
    for (    SpanEvent spanEvent : spanEventList) {
      TSpanEvent tSpanEvent=spanEvent.toThrift(true);
      tSpanEventList.add(tSpanEvent);
    }
    this.setSpanEventList(tSpanEventList);
  }
  return this;
}
