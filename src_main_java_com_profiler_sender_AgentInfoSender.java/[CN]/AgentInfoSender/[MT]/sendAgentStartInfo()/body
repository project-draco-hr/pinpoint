{
  while (connectToServer()) {
    try {
      Thread.sleep(TomcatProfilerConfig.SERVER_CONNECT_RETRY_GAP);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  try {
    ObjectOutputStream stream=new ObjectOutputStream(requestSocket.getOutputStream());
    AgentInfoDTO dto=new AgentInfoDTO();
    if (logger.isLoggable(Level.INFO)) {
      logger.info("send agent startup info. " + dto.toString());
    }
    stream.writeObject(dto);
    stream.close();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  if (requestSocket != null) {
    closeSocket();
  }
}
