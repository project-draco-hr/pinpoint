{
  AgentHistogramList agentHistogramList=new AgentHistogramList();
  for (  ResponseTime responseTime : responseHistogramList) {
    Set<Map.Entry<String,Histogram>> agentHistogram=responseTime.getAgentHistogram();
    for (    Map.Entry<String,Histogram> agentEntry : agentHistogram) {
      Histogram histogram=agentEntry.getValue();
      TimeHistogram timeHistogram=new TimeHistogram(application.getServiceType(),responseTime.getTimeStamp());
      timeHistogram.add(histogram);
      agentHistogramList.addAgentHistogram(agentEntry.getKey(),application.getServiceType(),timeHistogram);
    }
  }
  Map<Application,List<TimeHistogram>> histogramMap=interpolation(agentHistogramList,window);
  if (logger.isTraceEnabled()) {
    for (    AgentHistogram agentListEntry : agentHistogramList.getAgentHistogramList()) {
      Application agentName=agentListEntry.getAgentId();
      logger.trace("agentName:{}",agentName);
      Collection<TimeHistogram> value=agentListEntry.getTimeHistogram();
      for (      TimeHistogram histogram : value) {
        logger.trace("histogram:{}",histogram);
      }
    }
  }
  AgentTimeHistogram agentTimeHistogram=new AgentTimeHistogram(application,range,histogramMap);
  return agentTimeHistogram;
}
