{
  Map<String,List<TimeHistogram>> agentLevelMap=new HashMap<String,List<TimeHistogram>>();
  for (  LinkCallData linkCallData : linkCallDataMap) {
    String nodeGroup=null;
    if (sourceGroup) {
      nodeGroup=linkCallData.getSource();
    }
 else {
      nodeGroup=linkCallData.getTarget();
    }
    List<TimeHistogram> sourceHistogramList=agentLevelMap.get(nodeGroup);
    if (sourceHistogramList == null) {
      sourceHistogramList=new ArrayList<TimeHistogram>();
      agentLevelMap.put(nodeGroup,sourceHistogramList);
    }
    sourceHistogramList.addAll(linkCallData.getTimeHistogram());
  }
  Map<String,List<TimeHistogram>> histogramMap=interpolation(agentLevelMap);
  AgentTimeHistogram agentTimeHistogram=new AgentTimeHistogram(application,range,histogramMap);
  return agentTimeHistogram;
}
