{
  final String acceptorHost=span.getAcceptorHost();
  if (acceptorHost == null) {
    return;
  }
  final String spanApplicationName=span.getApplicationName();
  final short applicationServiceTypeCode=getApplicationServiceType(span).getCode();
  final String parentApplicationName=span.getParentApplicationName();
  final short parentServiceType=span.getParentApplicationType();
  final ServiceType spanServiceType=registry.findServiceType(span.getServiceType());
  if (spanServiceType.isQueue()) {
    hostApplicationMapDao.insert(span.getEndPoint(),spanApplicationName,applicationServiceTypeCode,parentApplicationName,parentServiceType);
  }
 else {
    hostApplicationMapDao.insert(acceptorHost,spanApplicationName,applicationServiceTypeCode,parentApplicationName,parentServiceType);
  }
}
