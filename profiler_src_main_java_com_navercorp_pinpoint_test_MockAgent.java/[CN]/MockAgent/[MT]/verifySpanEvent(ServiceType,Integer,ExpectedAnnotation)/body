{
  Object obj=getPeekableSpanDataSender().poll();
  short code=serviceType.getCode();
  if (obj == null) {
    throw new AssertionError("No SpanEvent. expected: " + toString(code,annotations));
  }
  if (!(obj instanceof SpanEvent)) {
    throw new AssertionError("Expected an instance of SpanEvent but was " + obj.getClass().getName() + ". expected: "+ toString(code,annotations)+ ", was: "+ obj);
  }
  SpanEvent span=(SpanEvent)obj;
  if (code != span.getServiceType()) {
    throw new AssertionError("Expected a SpanEvent with serviceType[" + code + "] but was ["+ span.getServiceType()+ "]. expected: "+ toString(code,annotations)+ ", was: "+ toString(span));
  }
  if (apiId != null && span.getApiId() != apiId) {
    throw new AssertionError("Expected a SpanEvent with ApiId[" + apiId + "] but was ["+ span.getApiId()+ "]. expected: "+ toString(code,annotations)+ ", was: "+ toString(span));
  }
  List<TAnnotation> actualAnnotations=span.getAnnotations();
  try {
    verifyAnnotations(actualAnnotations,annotations);
  }
 catch (  AssertionError e) {
    throw new AssertionError("expected: " + toString(code,annotations) + ", was: "+ toString(span));
  }
}
