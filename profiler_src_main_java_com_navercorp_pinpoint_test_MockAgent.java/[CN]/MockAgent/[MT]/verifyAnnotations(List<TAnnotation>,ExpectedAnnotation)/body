{
  int len=annotations.length;
  int actualLen=actualAnnotations == null ? 0 : actualAnnotations.size();
  if (actualLen != len) {
    throw new AssertionError("Expected [" + len + "] annotations but was ["+ actualLen+ "]");
  }
  for (int i=0; i < len; i++) {
    ExpectedAnnotation expect=annotations[i];
    TAnnotation actual=actualAnnotations.get(i);
    if (expect.getKey() != actual.getKey() || !Objects.equal(expect.getValue(),actual.getValue().getFieldValue())) {
      throw new AssertionError("Expected " + i + "th annotation ["+ expect+ "] but was ["+ toString(actual)+ "]");
    }
  }
}
