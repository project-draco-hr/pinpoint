{
  if (spanAlign.isSpan()) {
    final SpanBo spanBo=spanAlign.getSpanBo();
    if (spanBo.hasException()) {
      String simpleExceptionClass=getSimpleExceptionName(spanBo.getExceptionClass());
      return new Record(depth + 1,getNextId(),parentSequence,false,simpleExceptionClass,spanBo.getExceptionMessage(),0L,0L,0,null,null,null,null,false,false,spanBo.getTransactionId(),spanBo.getSpanId(),spanAlign.getExecutionTime());
    }
  }
 else {
    final SpanEventBo spanEventBo=spanAlign.getSpanEventBo();
    if (spanEventBo.hasException()) {
      String simpleExceptionClass=getSimpleExceptionName(spanEventBo.getExceptionClass());
      return new Record(depth + 1,getNextId(),parentSequence,false,simpleExceptionClass,spanEventBo.getExceptionMessage(),0L,0L,0,null,null,null,null,false,true,null,0,spanAlign.getExecutionTime());
    }
  }
  return null;
}
