{
  TBase tBase;
  if (dto instanceof TBase) {
    tBase=(TBase)dto;
  }
 else   if (dto instanceof Thriftable) {
    tBase=((Thriftable)dto).toThrift();
  }
 else {
    logger.warning("invalid type:" + dto.getClass());
    return;
  }
  byte[] sendData=serialize(tBase);
  if (sendData == null) {
    return;
  }
  DatagramPacket packet=new DatagramPacket(sendData,sendData.length);
  if (udpSocket == null) {
    udpSocket=createSocket();
  }
  if (udpSocket != null) {
    try {
      udpSocket.send(packet);
      if (logger.isLoggable(Level.FINE)) {
        logger.fine("Data sent. " + dto);
      }
    }
 catch (    IOException e) {
      logger.log(Level.WARNING,"packet send error " + dto,e);
    }
  }
}
