{
  server=new PinpointServerSocket();
  server.setMessageListener(new ServerMessageListener(){
    @Override public void handleSend(    SendPacket sendPacket,    SocketChannel channel){
      logger.info("handleSend:{}",sendPacket);
      if (sendLatch != null) {
        sendLatch.countDown();
      }
    }
    @Override public void handleRequest(    RequestPacket requestPacket,    SocketChannel channel){
      logger.info("handleRequest:{}",requestPacket);
    }
    @Override public HandShakeResponseCode handleHandShake(    Map arg0){
      return HandShakeResponseType.Success.DUPLEX_COMMUNICATION;
    }
  }
);
  server.bind(HOST,PORT);
}
