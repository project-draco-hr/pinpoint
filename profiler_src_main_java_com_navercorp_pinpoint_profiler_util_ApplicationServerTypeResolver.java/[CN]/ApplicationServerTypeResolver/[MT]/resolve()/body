{
  String applicationHome=System.getProperty("catalina.home");
  if (applicationHome == null) {
    applicationHome=System.getProperty("user.dir");
  }
  if (logger.isInfoEnabled()) {
    logger.info("Resolved ApplicationHome:{}",applicationHome);
  }
  if (defaultType != null) {
    logger.info("Configured applicationServerType:{}",defaultType);
    return initializeApplicationInfo(applicationHome,defaultType);
  }
  final File bloc3CatalinaJar=new File(applicationHome + "/server/lib/catalina.jar");
  final File bloc3ServletApiJar=new File(applicationHome + "/common/lib/servlet-api.jar");
  final File bloc4LibDir=new File(applicationHome + "/libs");
  if (isFileExist(bloc3CatalinaJar) && isFileExist(bloc3ServletApiJar)) {
    this.manuallyStartupRequired=false;
    return initializeApplicationInfo(applicationHome,ServiceType.BLOC);
  }
 else   if (isFileExist(bloc4LibDir)) {
    this.manuallyStartupRequired=true;
    return initializeApplicationInfo(applicationHome,ServiceType.BLOC);
  }
 else   if (isFileExist(new File(applicationHome + "/lib/catalina.jar"))) {
    this.manuallyStartupRequired=false;
    return initializeApplicationInfo(applicationHome,ServiceType.TOMCAT);
  }
 else {
    this.manuallyStartupRequired=true;
    return initializeApplicationInfo(applicationHome,ServiceType.STAND_ALONE);
  }
}
