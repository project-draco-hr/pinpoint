{
  checkBeforeTraceObject();
  final boolean sampling=sampler.isSampling();
  if (sampling) {
    Trace trace=traceFactory.createDefaultTrace(nextTransactionId(),traceType,sampling);
    set(trace);
    return trace;
  }
 else {
    final Trace metricTrace=traceFactory.createMetricTrace();
    set(metricTrace);
    return metricTrace;
  }
}
