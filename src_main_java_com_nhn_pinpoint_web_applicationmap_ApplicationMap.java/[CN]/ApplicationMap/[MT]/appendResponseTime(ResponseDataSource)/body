{
  if (responseDataSource == null) {
    throw new NullPointerException("responseDataSource must not be null");
  }
  final Collection<Node> nodes=this.nodeList.getNodeList();
  for (  Node node : nodes) {
    if (node.getServiceType().isWas()) {
      final Application application=new Application(node.getApplication().getName(),node.getServiceType());
      ResponseHistogramSummary nodeHistogramSummary=responseDataSource.getResponseHistogramSummary(application);
      node.setResponseHistogramSummary(nodeHistogramSummary);
    }
 else     if (node.getServiceType().isTerminal() || node.getServiceType().isUnknown()) {
      Application nodeApplication=new Application(node.getApplication().getName(),node.getServiceType());
      final ResponseHistogramSummary nodeHistogramSummary=new ResponseHistogramSummary(nodeApplication,range);
      final List<Link> toLinkList=linkList.findToLink(nodeApplication);
      for (      Link link : toLinkList) {
        nodeHistogramSummary.addLinkHistogram(link.getHistogram());
      }
      node.setResponseHistogramSummary(nodeHistogramSummary);
    }
 else     if (node.getServiceType().isUser()) {
      Application nodeApplication=node.getApplication();
      final ResponseHistogramSummary nodeHistogramSummary=new ResponseHistogramSummary(nodeApplication,range);
      final List<Link> fromLink=linkList.findFromLink(nodeApplication);
      for (      Link link : fromLink) {
        nodeHistogramSummary.addLinkHistogram(link.getHistogram());
      }
      node.setResponseHistogramSummary(nodeHistogramSummary);
    }
 else {
      Application nodeApplication=new Application(node.getApplication().getName(),node.getServiceType());
      ResponseHistogramSummary dummy=new ResponseHistogramSummary(nodeApplication,range);
      node.setResponseHistogramSummary(dummy);
    }
  }
}
