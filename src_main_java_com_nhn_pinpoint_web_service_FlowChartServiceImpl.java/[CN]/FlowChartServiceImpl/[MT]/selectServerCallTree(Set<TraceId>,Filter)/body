{
  StopWatch watch=new StopWatch();
  watch.start();
  List<List<SpanBo>> transactionList=this.traceDao.selectAllSpans(traceIdSet);
  List<SpanBo> filteredTransaction=new ArrayList<SpanBo>();
  for (  List<SpanBo> t : transactionList) {
    if (filter.include(t)) {
      for (      SpanBo span : t) {
        filteredTransaction.add(span);
      }
    }
  }
  Set<String> endPoints=createUniqueEndpoint(filteredTransaction);
  ServerCallTree tree=createServerCallTree(filteredTransaction,new ApplicationIdNodeSelector());
  List<SpanEventBo> spanEventBoList=findRecordStatisticsSpanEventData(filteredTransaction,endPoints);
  tree.addSpanEventList(spanEventBoList);
  tree.build();
  watch.stop();
  logger.info("Fetch single transaction serverCallTree elapsed. {}ms",watch.getLastTaskTimeMillis());
  return tree;
}
