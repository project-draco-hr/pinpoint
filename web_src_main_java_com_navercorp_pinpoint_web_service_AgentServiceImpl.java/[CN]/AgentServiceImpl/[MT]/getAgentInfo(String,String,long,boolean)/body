{
  if (checkDB) {
    long currentTime=System.currentTimeMillis();
    Set<AgentInfoBo> agentInfoBos=agentInfoService.getAgentsByApplicationName(applicationName,currentTime);
    for (    AgentInfoBo agentInfo : agentInfoBos) {
      if (agentInfo == null) {
        continue;
      }
      if (!agentInfo.getApplicationName().equals(applicationName)) {
        continue;
      }
      if (!agentInfo.getAgentId().equals(agentId)) {
        continue;
      }
      if (agentInfo.getStartTime() != startTimeStamp) {
        continue;
      }
      return new AgentInfo(agentInfo);
    }
    return null;
  }
 else {
    AgentInfo agentInfo=new AgentInfo();
    agentInfo.setApplicationName(applicationName);
    agentInfo.setAgentId(agentId);
    agentInfo.setStartTimestamp(startTimeStamp);
    return agentInfo;
  }
}
