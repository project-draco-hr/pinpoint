{
  try {
    TRouteResult routeResult=TRouteResult.UNKNOWN;
    TBase object=deserialize(payload,null);
    if (object == null) {
      return new AgentActiveThreadStatus(hostName,TRouteResult.UNKNOWN,null);
    }
    if (object instanceof TCommandTransferResponse) {
      TCommandTransferResponse routeResponse=(TCommandTransferResponse)object;
      routeResult=routeResponse.getRouteResult();
      if (routeResult != TRouteResult.OK) {
        return new AgentActiveThreadStatus(hostName,routeResult,null);
      }
      object=deserialize(((TCommandTransferResponse)object).getPayload(),null);
    }
    if (object == null) {
      return new AgentActiveThreadStatus(hostName,TRouteResult.UNKNOWN,null);
    }
    if (object instanceof TActiveThreadResponse) {
      return new AgentActiveThreadStatus(hostName,routeResult,(TActiveThreadResponse)object);
    }
  }
 catch (  TException e) {
    logger.warn(e.getMessage(),e);
  }
  return new AgentActiveThreadStatus(hostName,TRouteResult.UNKNOWN,null);
}
