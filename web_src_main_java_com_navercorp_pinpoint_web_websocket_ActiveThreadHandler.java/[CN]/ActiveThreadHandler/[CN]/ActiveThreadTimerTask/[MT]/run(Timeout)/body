{
  logger.info("ActiveThreadTimerTask started.");
  readLock.lock();
  try {
    for (    Map.Entry<String,List<WebSocketSession>> applicationEntry : applicationGroup.entrySet()) {
      List<AgentInfoBo> agentInfoList=agentSerivce.getAgentInfoList(applicationEntry.getKey());
      AgentActiveThreadStatusList agentActiveThreadStatusList=agentSerivce.getActiveThreadStatus(agentInfoList);
      String textMessage=jsonConverter.writeValueAsString(agentActiveThreadStatusList);
      for (      WebSocketSession session : applicationEntry.getValue()) {
        session.sendMessage(new TextMessage(textMessage));
      }
    }
    if (timer != null) {
      timer.newTimeout(new ActiveThreadTimerTask(),time,TimeUnit.MILLISECONDS);
    }
  }
  finally {
    readLock.unlock();
  }
}
