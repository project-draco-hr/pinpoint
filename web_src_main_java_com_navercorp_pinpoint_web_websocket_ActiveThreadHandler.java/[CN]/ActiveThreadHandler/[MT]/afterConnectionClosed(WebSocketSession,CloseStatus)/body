{
  logger.info("ConnectionClosed : {}, caused : {}",closeSession,status);
  String applicationName=(String)closeSession.getAttributes().get(APPLICATION_NAME_KEY);
  writeLock.lock();
  try {
    if (applicationName != null) {
      List<WebSocketSession> webSocketSessions=applicationGroup.get(applicationName);
      if (webSocketSessions == null) {
        webSocketSessions=new ArrayList<WebSocketSession>();
      }
      webSocketSessions.remove(closeSession);
      if (webSocketSessions.size() == 0) {
        applicationGroup.remove(applicationName);
      }
      if (applicationGroup.size() == 0) {
        if (timer != null) {
          timer.stop();
          timer=null;
        }
      }
    }
  }
  finally {
    writeLock.unlock();
  }
  super.afterConnectionClosed(closeSession,status);
}
