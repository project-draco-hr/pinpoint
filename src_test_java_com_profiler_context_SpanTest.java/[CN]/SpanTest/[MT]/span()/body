{
  Trace.addTracer(new Tracer(){
    @Override public void record(    Record record){
      System.out.printf("[%s] Record=%s\n",Thread.currentThread().getId(),record);
    }
  }
);
  int testSize=3;
  final CountDownLatch startLatch=new CountDownLatch(1);
  final CountDownLatch endLatch=new CountDownLatch(testSize);
  Executor exec=Executors.newFixedThreadPool(testSize);
  for (int i=0; i < testSize; i++) {
    exec.execute(new TraceTest(startLatch,endLatch));
  }
  startLatch.countDown();
  try {
    endLatch.await();
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
    Assert.fail(e.getMessage());
  }
}
