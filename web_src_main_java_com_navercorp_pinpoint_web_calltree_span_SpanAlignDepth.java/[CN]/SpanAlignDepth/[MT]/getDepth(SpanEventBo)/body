{
  if (spanEventBo.isAsync()) {
    async.sequence=spanEventBo.getSequence();
    if (isFirstEvent(spanEventBo) || async.first) {
      async.parent=align.parent + align.current;
      async.first=false;
    }
    if (!isSameParent(spanEventBo)) {
      int depth=spanEventBo.getDepth();
      async.current=async.parent + depth;
    }
    align.current=async.current;
  }
 else {
    sync.sequence=spanEventBo.getSequence();
    if (!isSameParent(spanEventBo)) {
      int depth=spanEventBo.getDepth();
      sync.current=sync.parent + depth;
    }
    align.current=sync.current;
  }
  this.prev=spanEventBo;
  return align.current;
}
