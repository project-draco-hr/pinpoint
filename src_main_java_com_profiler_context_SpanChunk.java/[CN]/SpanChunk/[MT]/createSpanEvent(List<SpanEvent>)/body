{
  List<com.profiler.common.dto.thrift.SpanEvent> result=new ArrayList<com.profiler.common.dto.thrift.SpanEvent>(spanEventList.size());
  for (  SpanEvent spanEvent : spanEventList) {
    com.profiler.common.dto.thrift.SpanEvent tSpanEvent=new com.profiler.common.dto.thrift.SpanEvent();
    long parentSpanStartTime=spanEvent.getParentSpan().getStartTime();
    tSpanEvent.setStartElapsed((int)(spanEvent.getStartTime() - parentSpanStartTime));
    tSpanEvent.setEndElapsed((int)(spanEvent.getEndTime() - spanEvent.getStartTime()));
    tSpanEvent.setSequence(spanEvent.getSequence());
    tSpanEvent.setRpc(spanEvent.getRpc());
    tSpanEvent.setServiceType(spanEvent.getServiceType().getCode());
    tSpanEvent.setDestinationId(spanEvent.getDestionationId());
    tSpanEvent.setEndPoint(spanEvent.getEndPoint());
    List<com.profiler.common.dto.thrift.Annotation> annotationList=new ArrayList<com.profiler.common.dto.thrift.Annotation>(spanEvent.getAnnotationSize());
    for (    TraceAnnotation traceAnnotation : spanEvent.getTraceAnnotationList()) {
      annotationList.add(traceAnnotation.toThrift());
    }
    if (spanEvent.getDepth() != -1) {
      tSpanEvent.setDepth(spanEvent.getDepth());
    }
    if (spanEvent.getNextSpanId() != -1) {
      tSpanEvent.setNextSpanId(spanEvent.getNextSpanId());
    }
    tSpanEvent.setAnnotations(annotationList);
    result.add(tSpanEvent);
  }
  return result;
}
