{
  if (traceKey) {
    final Object recordObject=args[keyIndex];
    trace.recordApi(getMethodDescriptor(),recordObject,keyIndex);
  }
 else {
    trace.recordApi(getMethodDescriptor());
  }
  if (result instanceof Future) {
    Operation op=((OperationAccessor)result).__getOperation();
    if (op != null) {
      MemcachedNode handlingNode=op.getHandlingNode();
      SocketAddress socketAddress=handlingNode.getSocketAddress();
      if (socketAddress instanceof InetSocketAddress) {
        InetSocketAddress address=(InetSocketAddress)socketAddress;
        trace.recordEndPoint(address.getHostName() + ":" + address.getPort());
      }
    }
 else {
      logger.info("operation not found");
    }
  }
  String serviceCode=((ServiceCodeAccessor)target).__getServiceCode();
  if (serviceCode != null) {
    trace.recordDestinationId(serviceCode);
    trace.recordServiceType(ServiceType.ARCUS);
  }
 else {
    trace.recordDestinationId("MEMCACHED");
    trace.recordServiceType(ServiceType.MEMCACHED);
  }
  trace.markAfterTime();
}
