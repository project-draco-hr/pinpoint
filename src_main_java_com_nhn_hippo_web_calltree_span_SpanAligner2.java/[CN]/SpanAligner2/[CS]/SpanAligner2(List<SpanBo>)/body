{
  spanMap=new HashMap<Long,SpanBo>(spans.size());
  long rootSpanStartTime=Long.MAX_VALUE;
  for (  SpanBo span : spans) {
    if (spanMap.containsKey(Long.valueOf(span.getSpanId()))) {
      throw new IllegalStateException("duplicated spanId. id:" + span.getSpanId());
    }
    if (span.getParentSpanId() == -1L) {
      rootSpanId=-1L;
      spanMap.put(-1L,span);
      continue;
    }
 else     if ((rootSpanId == null || rootSpanId != -1) && span.getStartTime() < rootSpanStartTime) {
      rootSpanId=(span.getParentSpanId() == -1) ? -1L : span.getSpanId();
      rootSpanStartTime=span.getStartTime();
    }
    spanMap.put(span.getSpanId(),span);
  }
}
