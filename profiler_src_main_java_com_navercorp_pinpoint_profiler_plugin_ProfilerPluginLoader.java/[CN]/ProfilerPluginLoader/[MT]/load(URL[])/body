{
  List<DefaultProfilerPluginContext> pluginContexts=new ArrayList<DefaultProfilerPluginContext>(pluginJars.length);
  List<String> disabled=agent.getProfilerConfig().getDisabledPlugins();
  for (  URL jar : pluginJars) {
    List<ProfilerPlugin> plugins=PluginLoader.load(ProfilerPlugin.class,new URL[]{jar});
    for (    ProfilerPlugin plugin : plugins) {
      if (disabled.contains(plugin.getClass().getName())) {
        logger.info("Skip disabled plugin: {}",plugin.getClass().getName());
        continue;
      }
      logger.info("Loading plugin: {}",plugin.getClass().getName());
      PluginConfig pluginConfig=new PluginConfig(jar,plugin,agent.getInstrumentation(),agent.getClassPool(),agent.getBootstrapCoreJar());
      final DefaultProfilerPluginContext context=setupPlugin(pluginConfig);
      pluginContexts.add(context);
    }
  }
  return pluginContexts;
}
