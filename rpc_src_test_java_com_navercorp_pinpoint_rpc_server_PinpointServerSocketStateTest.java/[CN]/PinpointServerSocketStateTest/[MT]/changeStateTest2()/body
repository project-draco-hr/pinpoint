{
  PinpointServerState state=new PinpointServerState();
  state.changeState(PinpointServerStateCode.RUN_DUPLEX);
  Assert.assertEquals(PinpointServerStateCode.RUN_DUPLEX,state.getCurrentState());
  PinpointServerStateCode currentState=state.changeState(PinpointServerStateCode.BEING_SHUTDOWN);
  Assert.assertNull(currentState);
  Assert.assertEquals(PinpointServerStateCode.BEING_SHUTDOWN,state.getCurrentState());
  currentState=state.changeState(PinpointServerStateCode.BEING_SHUTDOWN,PinpointServerStateCode.BEING_SHUTDOWN);
  Assert.assertEquals(PinpointServerStateCode.BEING_SHUTDOWN,currentState);
  Assert.assertEquals(PinpointServerStateCode.BEING_SHUTDOWN,state.getCurrentState());
  state.changeState(PinpointServerStateCode.SHUTDOWN);
  Assert.assertEquals(PinpointServerStateCode.SHUTDOWN,state.getCurrentState());
}
