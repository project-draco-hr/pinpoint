{
  try {
    logger.info("ActiveThreadTimerTask started.");
    Collection<WebSocketResponseAggregator> values=aggregatorRepository.values();
    for (    WebSocketResponseAggregator aggregator : values) {
      try {
        aggregator.flush();
      }
 catch (      Exception e) {
        logger.warn(e.getMessage(),e);
      }
    }
  }
  finally {
    if (timer != null && onTimerTask.get()) {
      timer.newTimeout(this,flushDelay,TimeUnit.MILLISECONDS);
    }
  }
}
