{
  String applicationName=(String)webSocketSession.getAttributes().get(APPLICATION_NAME_KEY);
  if (StringUtils.isEmpty(applicationName)) {
    return;
  }
  PinpointWebSocketResponseAggregator aggregator=aggregatorRepository.get(applicationName);
  if (aggregator == null) {
    aggregator=new ActiveThreadCountResponseAggregator(applicationName,agentSerivce,timer);
    aggregator.start();
    aggregatorRepository.put(applicationName,aggregator);
  }
  aggregator.addWebSocketSession(webSocketSession);
}
