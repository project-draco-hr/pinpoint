{
  logger.info("ConnectionEstablished : {}",newSession);
synchronized (lock) {
    sessionRepository.add(newSession);
    boolean turnOn=onTimerTask.compareAndSet(false,true);
    if (turnOn) {
      timer.newTimeout(new ActiveThreadTimerTask(),flushDelay,TimeUnit.MILLISECONDS);
    }
  }
  super.afterConnectionEstablished(newSession);
}
