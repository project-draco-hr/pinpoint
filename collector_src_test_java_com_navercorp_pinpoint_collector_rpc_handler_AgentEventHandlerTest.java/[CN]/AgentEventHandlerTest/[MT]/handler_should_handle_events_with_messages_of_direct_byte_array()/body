{
  final AgentEventType expectedEventType=AgentEventType.USER_THREAD_DUMP;
  final byte[] expectedMessageBody=BytesUtils.toBytes("some test message");
  ArgumentCaptor<AgentEventBo> argCaptor=ArgumentCaptor.forClass(AgentEventBo.class);
  this.agentEventHandler.handleEvent(this.pinpointServer,TEST_EVENT_TIMESTAMP,expectedEventType,expectedMessageBody);
  verify(this.agentEventDao,times(1)).insert(argCaptor.capture());
  AgentEventBo actualAgentEventBo=argCaptor.getValue();
  assertEquals(TEST_AGENT_ID,actualAgentEventBo.getAgentId());
  assertEquals(TEST_START_TIMESTAMP,actualAgentEventBo.getStartTimestamp());
  assertEquals(TEST_EVENT_TIMESTAMP,actualAgentEventBo.getEventTimestamp());
  assertEquals(expectedEventType,actualAgentEventBo.getEventType());
  assertEquals(expectedMessageBody,actualAgentEventBo.getEventBody());
}
