{
  if (linkDataDuplexMap == null) {
    throw new NullPointerException("linkDataMap must not be null");
  }
  if (agentInfoService == null) {
    throw new NullPointerException("agentInfoService must not be null");
  }
  NodeList nodeList=buildNode(linkDataDuplexMap);
  LinkList linkList=buildLink(nodeList,linkDataDuplexMap);
  appendNodeResponseTime(nodeList,linkList,nodeHistogramDataSource);
  appendAgentInfo(nodeList,linkDataDuplexMap,agentInfoService);
  final ApplicationMap map=new ApplicationMap(range,nodeList,linkList);
  return map;
}
