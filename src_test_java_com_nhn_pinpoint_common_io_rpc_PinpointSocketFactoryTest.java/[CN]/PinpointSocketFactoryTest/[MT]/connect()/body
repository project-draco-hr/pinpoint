{
  PinpointServerSocket ss=new PinpointServerSocket();
  ss.bind("localhost",10234);
  PinpointSocketFactory pinpointSocketFactory=new PinpointSocketFactory();
  try {
    PinpointSocket socket=pinpointSocketFactory.connect("localhost",10234);
    socket.send(new byte[20]);
    MessageFuture request=socket.request(new byte[10]);
    socket.sendSync(new byte[20]);
    Thread.sleep(1000);
    socket.close();
  }
  finally {
    pinpointSocketFactory.release();
    ss.release();
  }
}
