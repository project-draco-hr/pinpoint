{
  CallHistogram callHistogram=new CallHistogram("test",ServiceType.TOMCAT);
  callHistogram.getHistogram().addCallCount(ServiceType.TOMCAT.getHistogramSchema().getErrorSlot().getSlotTime(),1);
  CallHistogram copy=new CallHistogram(callHistogram);
  Assert.assertEquals(copy.getHistogram().getErrorCount(),1);
  callHistogram.getHistogram().addCallCount(ServiceType.TOMCAT.getHistogramSchema().getErrorSlot().getSlotTime(),2);
  Assert.assertEquals(callHistogram.getHistogram().getErrorCount(),3);
  String callJson=mapper.writeValueAsString(callHistogram);
  String before=originalJson(callHistogram);
  HashMap callJsonHashMap=mapper.readValue(callJson,HashMap.class);
  HashMap beforeJsonHashMap=mapper.readValue(before,HashMap.class);
  logger.debug("{} {}",callJsonHashMap,beforeJsonHashMap);
  Assert.assertEquals(callJsonHashMap,beforeJsonHashMap);
}
