{
  if (logger.isInfoEnabled()) {
    logger.info("Modifying. {}",className);
  }
  try {
    InstrumentClass aClass=byteCodeInstrumentor.getClass(classLoader,className,classFileBuffer);
    Interceptor createBeanInterceptor=new CreateBeanInstanceInterceptor(byteCodeInstrumentor.getRetransformEventTrigger(),modifier,filter);
    aClass.addInterceptor("createBeanInstance",new String[]{"java.lang.String","org.springframework.beans.factory.support.RootBeanDefinition","java.lang.Object[]"},createBeanInterceptor);
    Interceptor postProcessorInterceptor=new PostProcessorInterceptor(byteCodeInstrumentor.getRetransformEventTrigger(),modifier,filter);
    aClass.addInterceptor("applyBeanPostProcessorsBeforeInstantiation",new String[]{"java.lang.Class","java.lang.String"},postProcessorInterceptor);
    return aClass.toBytecode();
  }
 catch (  InstrumentException e) {
    logger.warn("AbstractAutowireCapableBeanFactoryModifier failed. Caused:",e.getMessage(),e);
    return null;
  }
}
