{
  if (pinpointSocketFactory == null) {
    throw new NullPointerException("pinpointSocketFactory must not be null");
  }
  HashedWheelTimer timer=TimerFactory.createHashedWheelTimer("Pinpoint-SocketHandler-Timer",100,TimeUnit.MILLISECONDS,512);
  timer.start();
  this.channelTimer=timer;
  this.pinpointSocketFactory=pinpointSocketFactory;
  this.requestManager=new RequestManager(timer,timeoutMillis);
  this.pingDelay=pingDelay;
  this.handshakeRetryInterval=handshakeRetryInterval;
  this.timeoutMillis=timeoutMillis;
  this.messageListener=pinpointSocketFactory.getMessageListener(SimpleLoggingMessageListener.LISTENER);
  this.serverStreamChannelMessageListener=pinpointSocketFactory.getServerStreamChannelMessageListener(DisabledServerStreamChannelMessageListener.INSTANCE);
  this.objectUniqName=ClassUtils.simpleClassNameAndHashCodeString(this);
  this.handshaker=new PinpointClientSocketHandshaker(channelTimer,(int)handshakeRetryInterval,maxHandshakeCount);
}
