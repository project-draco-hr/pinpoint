{
  boolean isCompleted=handshaker.handshakeComplete(message);
  if (isCompleted) {
    HandshakeResponseCode code=handshaker.getHandshakeResult();
    logger.debug("HandshakeResponse packet({} code={}) received. {}",message,code,channel);
    if (code == HandshakeResponseCode.SUCCESS || code == HandshakeResponseCode.ALREADY_KNOWN) {
      state.changeToRunSimplexCommunication();
    }
 else     if (code == HandshakeResponseCode.DUPLEX_COMMUNICATION || code == HandshakeResponseCode.ALREADY_DUPLEX_COMMUNICATION) {
      state.changeToRunDuplexCommunication();
    }
 else     if (code == HandshakeResponseCode.SIMPLEX_COMMUNICATION || code == HandshakeResponseCode.ALREADY_SIMPLEX_COMMUNICATION) {
      state.changeToRunSimplexCommunication();
    }
 else {
      logger.warn("Invalid Handshake Packet ({}) code={} received. {}",message,code,channel);
      return;
    }
    logger.info("Handshake completed. channel:{}, state:{}.",channel,state.getString());
  }
 else   if (handshaker.isFinished()) {
    logger.warn("Handshake already completed.");
  }
 else {
    logger.warn("Maybe handshake not stated.");
  }
}
