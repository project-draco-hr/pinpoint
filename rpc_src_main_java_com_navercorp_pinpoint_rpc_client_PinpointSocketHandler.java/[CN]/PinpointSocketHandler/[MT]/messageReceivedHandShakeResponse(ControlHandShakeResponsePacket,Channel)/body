{
  HandShakeResponseCode code=getHandShakeResponseCode(message.getPayload());
  logger.info("HandShake Response Packet({}) code={} received. {}",message,code,channel);
  if (code == HandShakeResponseCode.SUCCESS || code == HandShakeResponseCode.ALREADY_KNOWN) {
    state.changeRunSimplexCommunication();
  }
 else   if (code == HandShakeResponseCode.DUPLEX_COMMUNICATION || code == HandShakeResponseCode.ALREADY_DUPLEX_COMMUNICATION) {
    state.changeRunDuplexCommunication();
  }
 else   if (code == HandShakeResponseCode.SIMPLEX_COMMUNICATION || code == HandShakeResponseCode.ALREADY_SIMPLEX_COMMUNICATION) {
    state.changeRunSimplexCommunication();
  }
 else {
    logger.warn("Invalid HandShake Packet ({}) code={} received. {}",message,code,channel);
  }
}
