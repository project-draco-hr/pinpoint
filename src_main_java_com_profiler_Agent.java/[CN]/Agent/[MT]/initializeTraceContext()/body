{
  this.traceContext=TraceContext.getTraceContext();
  this.traceContext.setDataSender(this.dataSender);
  this.traceContext.setAgentId(this.agentId);
  this.traceContext.setApplicationId(this.applicationName);
  if (profilerConfig.isSamplingElapsedTimeBaseEnable()) {
    TimeBaseStorageFactory timeBaseStorageFactory=new TimeBaseStorageFactory(this.dataSender,this.profilerConfig);
    this.traceContext.setStorageFactory(timeBaseStorageFactory);
  }
 else {
    this.traceContext.setStorageFactory(new BypassStorageFactory(dataSender));
  }
}
